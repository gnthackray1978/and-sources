<!DOCTYPE html>
<html>
<head>
    <title>Source Tests</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>


    <script src="./libs/highlight.pack.js"></script>
    <script src="./libs/testlib.js"></script>
    <script>

        function GetSourceNames() {

            var params = { sourceIds: 'CEB4A571-B475-4457-8B7B-00B3FD1A131F' };

            var url = getUrl() + "sources/names?" + $.param(params);

            writeLine('URL', url);

            $.ajaxSetup({ cache: false });

            $.ajax({
                url: url,
                dataType: "json",

                type: "GET",
                success: success,
                error: error,

                timeout: 3000000 // sets timeout to 3 seconds
            });
        }

        //function Get1841CensusPlaces() {

        //    var params = { sourceId: 'CEB4A571-B475-4457-8B7B-00B3FD1A131F' };

        //    var url = getUrl() + "1841censusplaces?" + $.param(params);

        //    writeLine('URL', url);

        //    $.ajaxSetup({ cache: false });

        //    $.ajax({
        //        url: url,
        //        dataType: "json",

        //        type: "GET",
        //        success: success,
        //        error: error,

        //        timeout: 3000000 // sets timeout to 3 seconds
        //    });
        //}

        function Get1841CensusSources() {

            var params = { sourceId: 'CEB4A571-B475-4457-8B7B-00B3FD1A131F' };

            var url = getUrl() + "1841censussources?" + $.param(params);

            writeLine('URL', url);

            $.ajaxSetup({ cache: false });

            $.ajax({
                url: url,
                dataType: "json",

                type: "GET",
                success: success,
                error: error,

                timeout: 3000000 // sets timeout to 3 seconds
            });
        }
 
        function DeleteSource() {
            var url = getUrl() + "sources/delete";

            writeLine('URL', url);

            var recordId = '=CEB4A571-B475-4457-8B7B-00B3FD1A131F';

            $.ajax({
                url: url,
                dataType: "json",

                type: "POST",
                data: recordId,
                success: success,
                error: error
            });
        }

        function GetSources() {
            var params = {
                sourceTypes: '',//sourceTypes
                sourceRef: '',//sourceRef
                sourceDesc: '',//sourceDesc
                origLoc: '',//origLoc
                dateLb: '',//dateLb
                toDateLb: '',//toDateLb
                dateUb: '',//dateUb
                toDateUb: '',//toDateUb
                fileCount: '',//fileCount
                isThackrayFound: '',//isThackrayFound
                isCopyHeld: '',//isCopyHeld
                isViewed: '',//isViewed
                isChecked: '',//isChecked
                pageNumber: '',//pageNumber
                pageSize: '',//pageSize
                sortColumn: ''//sortColumn
            };

            var url = getUrl() + "sources?" + $.param(params);

            writeLine('URL', url);

            $.ajaxSetup({ cache: false });

            $.ajax({
                url: url,
                dataType: "json",

                type: "GET",
                success: success,
                error: error,

                timeout: 3000000 // sets timeout to 3 seconds
            });
        }

        function GetSource() {
            var params = { sourceId: 'CEB4A571-B475-4457-8B7B-00B3FD1A131F' };

            var url = getUrl() + "source?" + $.param(params);

            writeLine('URL', url);

            $.ajaxSetup({ cache: false });

            $.ajax({
                url: url,
                dataType: "json",

                type: "GET",
                success: success,
                error: error,

                timeout: 3000000 // sets timeout to 3 seconds
            });
        }

        function AddSource() {
          
            var serviceSourceAdd = {
                SourceId :'',
                IsCopyHeld :'true',
                IsThackrayFound :'true',
                IsViewed :'true',
                OriginalLocation :'mars',
                SourceDesc :'test source mars',
                SourceRef :'ref mars',
                SourceNotes :'some test notes',
                SourceDateStr :'1 Jan 1732',
                SourceDateStrTo :'31 Sep 1740',
                SourceFileCount :'',
                Parishs :'',
                SourceTypes: '1,2,3',
                FileIds: ''
            };

            var url = getUrl() + "source";

            writeLine('URL', url);

            $.ajax({
                url: url,
                dataType: "json",

                type: "POST",
                data: serviceSourceAdd,
                success: success,
                error: error
            });
        }

        function AddPersonTreeSource() {

            var sourceRecordSourceMap = {
                Records: 'CEB4A571-B475-4457-8B7B-00B3FD1A131F,CEB4A571-B475-4457-8B7B-00B3FD1A131F',
                Sources: 'CEB4A571-B475-4457-8B7B-00B3FD1A131F,CEB4A571-B475-4457-8B7B-00B3FD1A131F'
            };

            var url = getUrl() + "source/persontree";

            writeLine('URL', url);

            $.ajax({
                url: url,
                dataType: "json",

                type: "POST",
                data: sourceRecordSourceMap,
                success: success,
                error: error
            });
        }

        function AddMarriageTreeSource() {

            var sourceRecordSourceMap = {
                Records: 'CEB4A571-B475-4457-8B7B-00B3FD1A131F,CEB4A571-B475-4457-8B7B-00B3FD1A131F',
                Sources: 'CEB4A571-B475-4457-8B7B-00B3FD1A131F,CEB4A571-B475-4457-8B7B-00B3FD1A131F'
            };

            var url = getUrl() + "source/marriagetree";

            writeLine('URL', url);

            $.ajax({
                url: url,
                dataType: "json",

                type: "POST",
                data: sourceRecordSourceMap,
                success: success,
                error: error
            });

        }

        function RemoveTreeSources() {
            var url = getUrl() + "sources/tree/delete";

            writeLine('URL', url);

            var recordId = '=CEB4A571-B475-4457-8B7B-00B3FD1A131F';

            $.ajax({
                url: url,
                dataType: "json",

                type: "POST",
                data: recordId,
                success: success,
                error: error
            });
        }

        $(document).ready(function() {

            $("#get1841CensusSourcesId").click(function (e) {
                resetStyling();
                Get1841CensusSources();
                e.preventDefault();
            });

            //$("#get1841CensusPlacesId").click(function (e) {
            //    resetStyling();
            //    Get1841CensusPlaces();
            //    e.preventDefault();
            //});

            $("#getSourceNamesId").click(function (e) {
                resetStyling();
                GetSourceNames();
                e.preventDefault();
            });

            $("#deleteSourcesId").click(function (e) {
                resetStyling();
                DeleteSource();
                e.preventDefault();
            });

            $("#getSourcesId").click(function (e) {
                resetStyling();
                GetSources();
                e.preventDefault();
            });

            $("#getSourceId").click(function (e) {
                resetStyling();
                GetSource();
                e.preventDefault();
            });

            $("#addSourceId").click(function (e) {
                resetStyling();
                AddSource();
                e.preventDefault();
            });

            $("#addPersonTreeId").click(function (e) {
                resetStyling();
                AddPersonTreeSource();
                e.preventDefault();
            });

            $("#addMarriageTreeId").click(function (e) {
                resetStyling();
                AddMarriageTreeSource();
                e.preventDefault();
            });

            $("#removeTreeSourceId").click(function (e) {
                resetStyling();
                RemoveTreeSources();
                e.preventDefault();
            });


        });
    </script>

</head>
<body>

<div class="row">
    
    <div class="col-sm-4"><a id='get1841CensusSourcesId' href=''>1841 Census Sources</a>  </div>
    <!--<div class="col-sm-4"><a id='get1841CensusPlacesId' href=''>1841 Census Places</a> </div>-->
    <div class="col-sm-4"><a id='getSourceNamesId' href=''>Get Source Names</a> </div>
    <div class="col-sm-4"><a id='deleteSourcesId' href=''>Delete Sources</a>  </div>
    <div class="col-sm-4"><a id='getSourcesId' href=''>Get Sources</a> </div>
    <div class="col-sm-4"><a id='getSourceId' href=''>Get Source</a> </div>
    <div class="col-sm-4"><a id='addSourceId' href=''>Add Source</a>  </div>
    <div class="col-sm-4"><a id='addPersonTreeId' href=''>Add Person Tree Source</a> </div>
    <div class="col-sm-4"><a id='addMarriageTreeId' href=''>Add Marriage Tree Source</a> </div>
    <div class="col-sm-4"><a id='removeTreeSourceId' href=''>Remove Tree Sources</a> </div>
</div>

<br />
<textarea id="result" style="width: 100%; resize: horizontal;"></textarea>
<pre><code id="prettyResult" class="json" style="width: 1024px;"></code></pre>

</body>
</html>



        <!--public const string Get1841CensusSources = "1841censussources";//"/Get1841CensusSources?0={sourceId}";
            9
        public const string Get1841CensusPlaces = "1841censusplaces";// "/Get1841CensusPlaces";

        public const string GetSourceNames = "sources/names";// "/GetSourceNames?0={sourceIds}";

        public const string DeleteSource = "sources/delete";// "/Delete";

        public const string GetSources = "sources";
                                        //"/Select?0={sourceTypes}&1={sourceRef}&2={sourceDesc}&3={origLoc}" +
                                        //                             "&4={dateLB}&5={toDateLB}&6={dateUB}&7={toDateUB}&8={fileCount}&9={isThackrayFound}" +
                                        //                             "&10={isCopyHeld}&11={isViewed}&12={isChecked}&13={page_number}&14={page_size}&15={sortColumn}";

        public const string GetSource = "source";// "/GetSource?0={sourceId}";

        public const string AddSource = "source";//"/Add";

        public const string AddPersonTreeSource = "sources/persontree";// "/AddPersonTreeSource";
        public const string AddMarriageTreeSource = "sources/marriagetree"; //"/AddMarriageTreeSource";

        public const string RemoveTreeSources = "sources/tree/delete";//"/RemoveTreeSources";-->