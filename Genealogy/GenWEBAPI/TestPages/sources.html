<!DOCTYPE html>
<html>
<head>
    <title>Source Tests</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>


    <script src="highlight.pack.js"></script>
    <script src="testlib.js"></script>
    <script>

        function getMarriage(){

            var params = {id : 'CEB4A571-B475-4457-8B7B-00B3FD1A131F'};

            var url = getUrl() + "marriage?" + $.param(params);

            writeLine('URL', url);

            $.ajaxSetup({ cache: false });

            $.ajax({
                url: url,
                dataType: "json",

                type: "GET",
                success: success,
                error: error,

                timeout: 3000000 // sets timeout to 3 seconds
            });
        }

        function getMarriageByFilter(){

            var params = {
                uniqref : '',
                malecname : 'george',
                malesname : 'thackray',
                femalecname : '',
                femalesname : '',
                location : '',
                lowerDate : '1700',
                upperDate : '1850',
                sourceFilter : '',
                parishFilter : '',
                marriageWitness : '',
                pno : '0',
                psize : '20',
                sortcol : ''
            };

            var url = getUrl() + "marriages?" + $.param(params);

            writeLine('URL', url);

            $.ajaxSetup({ cache: false });

            $.ajax({
                url: url,
                dataType: "json",

                type: "GET",
                success: success,
                error: error,

                timeout: 3000000 // sets timeout to 3 seconds
            });
        }

        function addMarriage(){

            var marriageWitnesses = [];

            var serviceMarriage = {
                MarriageId : 'CEB4A571-B475-4457-8B7B-00B3FD1A131F',
                MarriageDate : '1 Jan 1800',
                MaleCName : 'George',
                MaleSName : 'Test',
                FemaleCName : 'Sarah',
                FemaleSName : 'Test',
                MaleNotes : 'some male test notes',
                FemaleNotes : 'some female test notes',
                MarriageLocation : 'Grantham',
                LocationId : '69FC0FDA-0885-4B78-A188-0F0866FAF498',
                LocationCounty : 'Lincolnshire',
                MaleLocation : 'Grantham',
                FemaleLocation : 'Sleaford',
                IsBanns : 'true',
                IsLicense : 'false',
                IsWidow : 'false',
                IsWidower : 'true',
                MaleOccupation : 'Male occupation',
                FemaleOccupation : 'Female occupation',
                MaleBirthYear : '1780',
                FemaleBirthYear : '1780',
                SourceDescription : 'source description'
            };

            var serviceMarriageData = {
                serviceMarriage : serviceMarriage,
                sources : 'E54A4328-B1FD-4D13-AB49-00004230CC11',
                marriageWitnesses : marriageWitnesses//JSON.stringify(marriageWitnesses)
            };




            var url = getUrl() + "addmarriage/";



            writeLine('URL', url);



            //	p = {
            //			username: 'y',
            //		password: 'x'
            //	};

            $.ajax({
                url: url,
                dataType: "json",

                type: "POST",
                data: serviceMarriageData,
                success: success,
                error: error
            });
        }



        $(document).ready(function() {

            $("#getmarriageid").click(function(e) {
                resetStyling();
                getMarriage();
                e.preventDefault();
            });

            $("#getmarriages").click(function(e) {
                resetStyling();
                getMarriageByFilter();
                e.preventDefault();
            });

            $("#addmarriage").click(function(e) {
                resetStyling();
                addMarriage();
                e.preventDefault();
            });

        });
    </script>

</head>
<body>

<div class="row">
    
    <div class="col-sm-4"><a id='getmarriageid' href=''>GetMarriage</a>  </div>
    <div class="col-sm-4"><a id='addmarriage' href=''>AddMarriage</a> </div>
    <div class="col-sm-4"><a id='getmarriages' href=''>GetMarriages</a> </div>

</div>

<br />
<textarea id="result" style="width: 100%; resize: horizontal;"></textarea>
<pre><code id="prettyResult" class="json" style="width: 1024px;"></code></pre>

</body>
</html>



        <!--public const string Get1841CensusSources = "1841censussources";//"/Get1841CensusSources?0={sourceId}";
            9
        public const string Get1841CensusPlaces = "1841censusplaces";// "/Get1841CensusPlaces";

        public const string GetSourceNames = "sources/names";// "/GetSourceNames?0={sourceIds}";

        public const string DeleteSource = "sources/delete";// "/Delete";

        public const string GetSources = "sources";
                                        //"/Select?0={sourceTypes}&1={sourceRef}&2={sourceDesc}&3={origLoc}" +
                                        //                             "&4={dateLB}&5={toDateLB}&6={dateUB}&7={toDateUB}&8={fileCount}&9={isThackrayFound}" +
                                        //                             "&10={isCopyHeld}&11={isViewed}&12={isChecked}&13={page_number}&14={page_size}&15={sortColumn}";

        public const string GetSource = "source";// "/GetSource?0={sourceId}";

        public const string AddSource = "source";//"/Add";

        public const string AddPersonTreeSource = "sources/persontree";// "/AddPersonTreeSource";
        public const string AddMarriageTreeSource = "sources/marriagetree"; //"/AddMarriageTreeSource";

        public const string RemoveTreeSources = "sources/tree/delete";//"/RemoveTreeSources";-->