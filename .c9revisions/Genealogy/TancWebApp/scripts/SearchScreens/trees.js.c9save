{"ts":1355143257661,"silentsave":true,"restoring":false,"patch":[[{"diffs":[[1,"ï»¿\n\n\n$(document).ready(function () {\n    createHeader('#1');\n    refreshData();\n});\n\n// called from refresh button that gives it page 0 as default.\nfunction getTreeSources(page) {\n\n    if (isNaN(page))\n        page = 0;\n\n    updateQryPar('active', '1');\n    updateQryPar('desc', $('#txtDescFilter').val());\n    updateQryPar('page', page);\n\n    refreshData();\n}\n\n// called from pager\nfunction getLink(toPage) {\n    // replace the previous page in the query string with the new one we want\n    window.location.hash = window.location.hash.replace('page=' + getParameterByName('page', ''), 'page=' + toPage);\n    refreshData();\n}\n\n\nfunction deleteTree() {\n    //var deleteSourceUrl = getHost() + \"/Trees/DeleteTree\";\n    var selectedTree = getParameterByName('selectedTree', '');\n    var theData = {};\n\n    if (selectedTree.length > 5) {\n\n        theData.treeId = selectedTree;\n\n        twaPostJSON('/Trees/DeleteTree', theData, '', '', function (args) {\n            refreshWithErrorHandler(refreshData, args);\n        });\n\n//        var stringy = JSON.stringify(theData);\n\n//        $.ajax({\n//            cache: false,\n//            type: \"POST\",\n//            async: false,\n//            url: deleteSourceUrl,\n//            data: stringy,\n//            contentType: \"application/json\",\n//            dataType: \"json\",\n//            success: function (department) {\n//                refreshData();\n//            }\n//        });\n\n    }\n    else {\n        showError('No Tree Selected : ' + selectedTree);\n    }\n}\n\n// refresh tree sources with data from the query string\nfunction refreshData(param) {\n    //var url = getHost() + \"/GetTreeSources/Select\";\n    var isActive = getParameterByName('active', '');\n\n    if (isActive == '1') {\n\n        var params = {};\n\n        params[0] = getParameterByName('desc', '');\n        params[1] = getParameterByName('page', '0');\n        params[2] = '25';\n      //  $.getJSON(url, params, writeTreeSources);\n\n        twaGetJSON('/GetTreeSources/Select', params, writeTreeSources);\n    }\n\n}\n\n// this can find out what page its on based on the\n// returned data.\nfunction writeTreeSources(data) {\n    \n    var tableBody = '';\n\n    var selectedTree = getParameterByName('selectedTree', '');\n\n    $.each(data.serviceSources, function (source, sourceInfo) {\n        //<a href='' class=\"button\" ><span>Main</span></a>\n        var hidfield = '<input type=\"hidden\" name=\"source_id\" id=\"source_id\" value =\"' + sourceInfo.SourceId + '\"/>';\n\n        if (selectedTree == sourceInfo.SourceId) {\n            tableBody += '<tr class = \"highLightRow\">' + hidfield;\n         //   selectedTreeRow = false;\n        }\n        else {\n            tableBody += '<tr>' + hidfield;\n        }\n\n        tableBody += '<td><div>' + sourceInfo.SourceYear + '</div></td>';\n        tableBody += '<td><div>' + sourceInfo.SourceYearTo + '</div></td>';\n        tableBody += '<td><a href=\"\" onClick =\"treeSelect(\\'' + sourceInfo.SourceId + '\\',\\'' + sourceInfo.DefaultPerson + '\\');return false\"><div>' + sourceInfo.SourceRef + '</div></a></td>';\n        tableBody += '<td><div>' + sourceInfo.SourceDesc + '</div></td>';\n\n        tableBody += '<td><a href=\"../HtmlPages/AncestorsTree.html#?id=' + sourceInfo.DefaultPerson + '&zoom=100&xpos=0&ypos=600&isAnc=1#Dec\"><div>Ancestor view</div></a></td>';\n\n        tableBody += '<td><a href=\"../HtmlPages/DescendantsTree.html#?sid=' + sourceInfo.SourceId + '&id=' + sourceInfo.DefaultPerson + '&zoom=100&xpos=0&ypos=0&isAnc=1#Dec\"><div>Family View</div></a></td>';\n\n        tableBody += '</tr>';\n    });\n\n\n    if (tableBody != '') {\n        $('#search_bdy').html(tableBody);\n\n\n        $('#reccount').html(data.Total + ' Trees Found');\n\n        //create pager based on results\n\n        $('#pager').html(createpager(data.Batch, data.BatchLength, data.Total, 'getLink'));\n    }\n\n\n    //re select person and tree\n    treeSelect();\n}\n\n\n// SELECT SOURCE (CLICK SOURCE NAME)\n// gets persons for associated tree\n// high lights selection\nfunction treeSelect(arg_selectedTree, arg_defaultPerson) {\n\n    var date = 0;\n    var dateTo = 0;\n    var sourceRef = '';\n    var sourceDesc = '';\n\n    if (arg_defaultPerson != undefined && arg_selectedTree != undefined) {\n        updateQryPar('selectedTree', arg_selectedTree);\n        updateQryPar('selectedPerson', arg_defaultPerson);\n    }\n\n    getTreePersons();\n\n    var found = false;\n    $('#search_bdy .highLightRow').removeClass(\"highLightRow\");\n\n    var selectedTree = getParameterByName('selectedTree', '');\n\n\n\n    // search all rows for the one we want\n    $('#search_bdy tr').each(function () {\n        $this = $(this);\n        var rowTreeId = $this.find(\"input\").val();\n        // search until we find id of the tree (the source)\n\n        if (selectedTree == rowTreeId) {\n\n            found = true;\n\n            $this.toggleClass('highLightRow');\n\n            var idx = 0;\n\n            $(this).find('td span').each(function () {\n\n                var tp = $(this).text();\n\n                if (idx == 0)\n                    date = tp;\n\n                if (idx == 1)\n                    dateTo = tp;\n\n                if (idx == 2)\n                    sourceRef = tp;\n\n                if (idx == 3)\n                    sourceDesc = tp;\n\n                idx++;\n            })\n        }\n    }); //endeach\n\n    $('#txtTreeDesc').val(sourceDesc);\n    $('#txtTreeRef').val(sourceRef);\n    $('#txtTreeDataFrom').val(date);\n    $('#txtTreeDataTo').val(dateTo);\n\n\n    $('#dbutton').removeClass('hidePanel').addClass('displayPanel');\n}\n\n\nfunction newTree() {\n\n    updateQryPar('selectedTree', '00000000-0000-0000-0000-000000000000');\n    updateQryPar('selectedPerson', '00000000-0000-0000-0000-000000000000');\n\n//    date = 0;\n//    dateTo = 0;\n//    sourceRef = '';\n//    sourceDesc = '';\n\n    $('#txtTreeDesc').val('');\n    $('#txtTreeRef').val('');\n    $('#txtTreeDataFrom').val(1500);\n    $('#txtTreeDataTo').val(1900);\n\n    $('#dbutton').addClass('hidePanel').removeClass('displayPanel');\n\n    treeSelect();\n\n}\n\n\n//linked to save button on 2nd panel\nfunction saveTree() {\n    //if we have a valid sourceid and some data \n    //then we are editting a existing tree\n    //\n    //if we have a blank or empty sourceid and we have some valid data \n    //then we are adding a new one\n    var treeName = $('#fileNameId').val();\n    var sourceDesc = $('#txtTreeDesc').val();\n    var sourceRef = $('#txtTreeRef').val();\n    var date = $('#txtTreeDataFrom').val();\n    var dateTo = $('#txtTreeDataTo').val();\n \n\n    var isError = false;\n    var errorMessage = '';\n\n    if ((isNaN(date)) || (isNaN(dateTo))) {\n        isError = true;\n        errorMessage += 'Invalid Dates entered';\n    }\n    else {\n        if (date < 1000 || date > 2100 || dateTo < 1000 || dateTo > 2100) {\n            isError = true;\n            errorMessage += 'Invalid Date Range';\n        }\n    }\n\n    if (sourceDesc == '') {\n        isError = true;\n        errorMessage += '\\r\\nInvalid Description';\n    }\n\n    if (sourceRef == '') {\n        isError = true;\n        errorMessage += '\\r\\nInvalid Reference';\n    }\n\n    if (treeName == '') {\n        isError = true;\n        errorMessage += '\\r\\nInvalid Tree Name';\n    }\n\n\n\n\n    if (!isError) {\n        // $.post(setDefaultPersonUrl, JSON.stringify(theData));\n        //sourceId, string fileName, string sourceRef, string sourceDesc, string sourceYear, string sourceYearTo\n\n       // var saveSourceUrl = getHost() + \"/SaveTree/Save\";\n        var theData = {};\n\n        theData.sourceId = String(selectedTree);\n        theData.fileName = String(treeName);\n        theData.sourceRef = String(sourceRef);\n        theData.sourceDesc = String(sourceDesc);\n        theData.sourceYear = String(date);\n        theData.sourceYearTo = String(dateTo);\n\n\n//        var stringy = JSON.stringify(theData);\n\n//        $.ajax({\n//            cache: false,\n//            type: \"POST\",\n//            async: false,\n//            url: saveSourceUrl,\n//            data: stringy,\n//            contentType: \"application/json\",\n//            dataType: \"json\",\n//            success: function (department) {\n//                //  alert('finished');\n//            }\n//        });\n\n        twaPostJSON('/SaveTree/Save', theData, '', '', function (args) {\n            refreshWithErrorHandler(refreshData, args);\n        });\n\n        //refresh sources\n        //refreshData();       \n        \n\n        //<div class=\"fileupload-content\">\n        //<table class=\"files\"></table>\n        //</div>\n\n        if (selectedTree == '00000000-0000-0000-0000-000000000000' || selectedTree == '') {\n            newTree();\n        }\n\n        $('#fileupload .fileupload-content').html('<table class=\"files\"></table>');\n\n    }\n    else {\n        alert(errorMessage);\n    }\n\n\n}\n\n\nfunction getTreePersons() {\n\n    //var treePersonUrl = getHost() + \"/GetTreePersons/Select\";\n    var treeId = getParameterByName('selectedTree', '');\n    \n\n    var tableBody = '';\n    \n\n    if (treeId != '00000000-0000-0000-0000-000000000000') {\n        var theData = {};\n        var count = 0;\n        theData[0] = treeId;\n        theData[1] = $('#txtFrom').val();\n        theData[2] = $('#txtTo').val();\n\n        twaGetJSON('/GetTreePersons/Select', theData, function (data) {\n        //$.getJSON(treePersonUrl, theData, function (data) {\n\n            $.each(data, function (source, sourceInfo) {\n                count++;\n                var hidfield = '<input type=\"hidden\" name=\"person_id\" id=\"person_id\" value =\"' + sourceInfo.PersonId + '\"/>';\n\n                var selectedPerson = getParameterByName('selectedPerson', '');\n\n                if (sourceInfo.PersonId == selectedPerson) {\n                    tableBody += '<tr class = \"highLightRow\">' + hidfield + '<td><a href=\"\" onClick =\"processPersonSelect(\\'' + sourceInfo.PersonId + '\\');return false\"><span>'\n                    + sourceInfo.BirthYear + ' ' + sourceInfo.ChristianName + ' ' + sourceInfo.Surname + '</span></a></td></tr>';\n                }\n                else {\n                    tableBody += '<tr>' + hidfield + '<td><a href=\"\" onClick =\"processPersonSelect(\\'' + sourceInfo.PersonId + '\\');return false\"><span>'\n                    + sourceInfo.BirthYear + ' ' + sourceInfo.ChristianName + ' ' + sourceInfo.Surname + '</span></a></td></tr>';\n\n                }\n            });\n\n            $('#person_lookup_body').html(tableBody);\n\n            $('.pSelPer').removeClass('hidePanel').addClass('displayPanel');\n\n        });\n    }\n\n    $('#person_lookup_body').html(tableBody);\n\n    $('#pSelPer').removeClass('hidePanel').addClass('displayPanel');\n\n    return false;\n}\n\n\n\n//SET DEFAULT PERSON FOR SELECTED TREE\nfunction processPersonSelect(evt) {\n\n    var setDefaultPersonUrl = getHost() + \"/settreepersons/Set\";\n\n    updateQryPar('selectedPerson', evt);\n\n    $('#person_lookup_body tr').each(function () {\n        $this = $(this)\n\n        var quantity = $this.find(\"input\").val();\n        if (evt == quantity) {\n            $('#person_lookup_body tr.highLightRow').toggleClass('highLightRow');\n\n            $this.toggleClass('highLightRow');\n                    \n            var theData = {};\n\n            theData.sourceId = getParameterByName('selectedTree', '');\n            theData.personId = getParameterByName('selectedPerson', '');\n\n            // $.post(setDefaultPersonUrl, JSON.stringify(theData));\n\n//            var stringy = JSON.stringify(theData);\n\n//            $.ajax({\n//                cache: false,\n//                type: \"POST\",\n//                async: false,\n//                url: setDefaultPersonUrl,\n//                data: stringy,\n//                contentType: \"application/json\",\n//                dataType: \"json\",\n//                success: function (department) {\n//                    //  alert('finished');\n//                }\n//            });\n\n\n            twaPostJSON('/settreepersons/Set', theData, '', '');\n        }\n\n    });        //endeach\n\n    \n\n\n}\n\n           \n\n\n        \n"]],"start1":0,"start2":0,"length1":0,"length2":11921}]],"length":11921}
{"contributors":[],"silentsave":false,"ts":1355156907665,"patch":[[{"diffs":[[-1,"ï»¿\n\n\n$(document).ready(function () {\n    createHeader('#1');\n    refreshData();\n});\n\n"],[1,"var JSMaster, QryStrUtils,AncUtils,Panels;\n\n\n\n$(document).ready(function () {\n    var jsMaster = new JSMaster();\n    var ancTreeSearch = new AncTreeSearch();\n\n    jsMaster.generateHeader('#1', function () {\n        ancTreeSearch.init();\n\n    });\n\n});\n\n\nvar AncTreeSearch = function () {\n    \n};\n\n\nAncTreeSearch.prototype = {\n    \n    "],[0,"// c"]],"start1":0,"start2":0,"length1":88,"length2":338},{"diffs":[[0,"efault.\n"],[-1,"function"],[1,"   "],[0," getTree"]],"start1":389,"start2":389,"length1":24,"length2":19},{"diffs":[[0,"rces"],[-1,"(page"],[1,": function ("],[0,") {"],[-1,"\n\n"],[0,"    "],[-1,"if (isNaN(page))\n        page = 0;\n\n    updateQryPar"],[1," \n        var isActive = this.qryStrUtils.getParameterByName"],[0,"('ac"]],"start1":411,"start2":411,"length1":74,"length2":87},{"diffs":[[0,"', '"],[-1,"1"],[0,"');\n    "],[1,"   "],[-1,"updateQryPar('desc',"],[1," if (isActive == '1') {\n            var params = {};    \n            params[0] ="],[0," $('"]],"start1":502,"start2":502,"length1":37,"length2":99},{"diffs":[[0,"al()"],[-1,")"],[0,";\n    "],[-1,"updateQryPar('page', page);\n\n    refreshData();\n}\n\n// called from pager\nfunction getLink(toPage) {\n    // replace the previous page in the query string with the new one we want\n    window.location.hash = window.location.hash.replace('page=' + getParameterByName('page', ''), 'page=' + toPage"],[1,"        params[1] = String(this.qryStrUtils.getParameterByName('page', 0));\n            params[2] = '25';\n         \n            this.ancUtils.twaGetJSON('/GetTreeSources/Select', params, $.proxy(this.writeTreeSources, this));         \n        }        \n    },    \n    createQryString: function () {\n        var args = {\n            \"active\": '1',\n            \"desc\": $('#txtDescFilter')                 \n        };\n        this.qryStrUtils.updateQry(args);\n    },\n    getLink :function(toPage) {\n        this.qryStrUtils.updateQryPar('page', toPage);        \n        this.getTreeSources();\n    }\n    \n};\n\n\n\n//$(document).ready(function () {\n//    createHeader('#1'"],[0,");\n"],[1,"//"],[0,"    "]],"start1":619,"start2":619,"length1":309,"length2":683},{"diffs":[[0,"Data();\n"],[-1,"}"],[1,"//});\n\n\n\n// called from pager\n"],[0,"\n\n\nfunct"]],"start1":1309,"start2":1309,"length1":17,"length2":46},{"diffs":[[0,"\n}\n\n"],[-1,"// refresh tree sources with data from the query string\nfunction refreshData(param) {\n    //var url = getHost() + \"/GetTreeSources/Select\";\n    var isActive = getParameterByName('active', '');\n\n    if (isActive == '1') {\n\n        var params = {};\n\n        params[0] = getParameterByName('desc', '');\n        params[1] = getParameterByName('page', '0');\n        params[2] = '25';\n      //  $.getJSON(url, params, writeTreeSources);\n\n        twaGetJSON('/GetTreeSources/Select', params, writeTreeSources);\n    }\n\n}"],[1," "],[0,"\n\n//"]],"start1":2229,"start2":2229,"length1":520,"length2":9}]],"length":12133,"saved":false}
{"ts":1355158328622,"patch":[[{"diffs":[[0,"n () {\n    \n"],[1,"    this.postParams = { \n        url: '',\n        data: '',\n        idparam: undefined,\n        refreshmethod: this.getTreeSources,\n        refreshArgs: ['1'],\n        Context: this\n    };\n"],[0,"};\n\n\nAncTree"]],"start1":280,"start2":280,"length1":24,"length2":213},{"diffs":[[0,"   }"],[1,","],[0,"\n    "],[-1,"\n};\n\n\n\n//$(document).ready("],[1,"deleteTree: "],[0,"function"],[-1," "],[0,"() {"],[-1,"\n//    createHeader('#1');\n//    refreshData();\n//});\n\n\n\n// called from pager\n\n\n\nfunction deleteTree() {\n    //var deleteSourceUrl = getHost() + \"/Trees/DeleteTree\";\n"],[1,"                       \n        this.postParams.url = '/Trees/DeleteTree';\n        this.postParams.data = { treeId: this.qryStrUtils.getParameterByName('selectedTree', '') };\n        this.ancUtils.twaPostJSON(this.postParams);\n    },\n    // returned data.\n    writeTreeSources:function(data) {\n    \n        var tableBody = '';\n    \n    "],[0,"    "]],"start1":1409,"start2":1409,"length1":219,"length2":374},{"diffs":[[0," selectedTree = "],[1,"this.qryStrUtils."],[0,"getParameterByNa"]],"start1":1786,"start2":1786,"length1":32,"length2":49},{"diffs":[[0,"    "],[-1,"var theData = {};\n\n    if (selectedTree.length > 5) {\n\n        theData.treeId = selectedTree;\n\n        twaPostJSON('/Trees/D"],[1,"\n        $.each(data.serviceSources, function (source, sourceInfo) {\n             \n            var hidfield = '<input type=\"hidden\" name=\"source_id\" id=\"source_id\" value =\"' + sourceInfo.SourceId + '\"/>';\n    \n            if (s"],[0,"ele"],[1,"c"],[0,"te"],[1,"d"],[0,"Tree"],[-1,"', theData, '', '', function (args"],[1," == sourceInfo.SourceId"],[0,") {\n"]],"start1":1859,"start2":1859,"length1":175,"length2":269},{"diffs":[[0,"    "],[1,"   "],[-1,"refreshWithErrorHandler(refreshData, args);\n        });\n\n//        var string"],[1," tableBody += '<tr class = \"highLightRow\">' + hidfield;\n            \n            }\n            else {\n                tableBod"],[0,"y "],[1,"+"],[0,"= "],[-1,"JSON.stringify(theData);\n\n//        $.ajax({\n//            cache: false,\n//            type: \"POST\",\n//            async: false,\n//            url: deleteSourceUrl,\n//            data: stringy,\n//            contentType: \"application/json\",\n//            dataType: \"json\",\n//            success: function (department) {\n//                refreshData();\n//            }\n//        });\n\n"],[1,"'<tr>' + hidfield;\n            }\n    \n            tableBody += '<td><div>' + sourceInfo.SourceYear + '</div></td>';\n            tableBody += '<td><div>' + sourceInfo.SourceYearTo + '</div></td>';\n            tableBody += '<td><a href=\"\" onClick =\"treeSelect(\\'' + sourceInfo.SourceId + '\\',\\'' + sourceInfo.DefaultPerson + '\\');return false\"><div>' + sourceInfo.SourceRef + '</div></a></td>';\n            tableBody += '<td><div>' + sourceInfo.SourceDesc + '</div></td>';\n    \n            tableBody += '<td><a href=\"../HtmlPages/AncestorsTree.html#?id=' + sourceInfo.DefaultPerson + '&zoom=100&xpos=0&ypos=600&isAnc=1#Dec\"><div>Ancestor view</div></a></td>';\n    \n            tableBody += '<td><a href=\"../HtmlPages/DescendantsTree.html#?sid=' + sourceInfo.SourceId + '&id=' + sourceInfo.DefaultPerson + '&zoom=100&xpos=0&ypos=0&isAnc=1#Dec\"><div>Family View</div></a></td>';\n    \n            tableBody += '</tr>';\n        });\n    \n    \n        if (tableBody !== '') {\n            $('#search_bdy').html(tableBody);    \n            $('#reccount').html(data.Total + ' Trees Found');\n    \n            //create pager based on results\n    \n            $('#pager').html(createpager(data.Batch, data.BatchLength, data.Total, 'getLink'));\n    "],[0,"    "]],"start1":2136,"start2":2136,"length1":473,"length2":1376},{"diffs":[[0,";\n        }\n    "],[-1,"else {"],[1,"\n    "],[0,"\n        showErr"]],"start1":3502,"start2":3502,"length1":38,"length2":37},{"diffs":[[0,"    "],[-1,"showError('No T"],[1,"//re select person and tree\n        t"],[0,"ree"],[-1," "],[0,"Select"],[-1,"ed : ' + selectedTree);\n    }\n}"],[1,"();\n    }\n    \n};\n\n\n\n//$(document).ready(function () {\n//    createHeader('#1');\n//    refreshData();\n//});\n\n\n\n// called from pager\n\n\n\n"],[0,"\n\n \n"]],"start1":3528,"start2":3528,"length1":64,"length2":189}]],"length":13615,"saved":false}
{"ts":1355160718158,"patch":[[{"diffs":[[0,"eBody = '';\n"],[1,"        var selectEvents = [];\n"],[0,"    \n       "]],"start1":1758,"start2":1758,"length1":24,"length2":55}]],"length":13646,"saved":false}
{"ts":1355168040162,"patch":[[{"diffs":[[0,"s = [];\n    "],[-1,""],[0,""],[1,"    var _idx = 0;\n    //    var that = this;\n        "],[0,"\n        var"]],"start1":1793,"start2":1793,"length1":24,"length2":77},{"diffs":[[0,"w\">' + hidfield;"],[-1,"\n"],[0,""],[1,""],[0,"            \n   "]],"start1":2266,"start2":2266,"length1":33,"length2":32},{"diffs":[[0," '</div></td>';\n"],[1,"            \n"],[0,"            tabl"]],"start1":2537,"start2":2537,"length1":32,"length2":45},{"diffs":[[0,"><a "],[-1,"href=\"\" onClick =\"treeSelect(\\'"],[1," id= \"s' + _idx + '\" href=\"\" ><div>"],[0,"' + "]],"start1":2595,"start2":2595,"length1":39,"length2":43},{"diffs":[[0,"urce"],[-1,"Id"],[1,"Ref"],[0," + '"],[-1,"\\',\\'' + sourceInfo.DefaultPerson + '\\');return false\"><div>' + sourceInfo.SourceRef + '</div></a></td>';"],[1,"</div></a></td>';\n    \n            selectEvents.push({ key: 's' + _idx, value: {sid: sourceInfo.SourceId, did: sourceInfo.DefaultPerson }});\n    "],[0,"\n   "]],"start1":2651,"start2":2651,"length1":119,"length2":160},{"diffs":[[0,"ody += '</tr>';\n"],[1,"            \n            _idx++;\n"],[0,"        });\n    "]],"start1":3313,"start2":3313,"length1":32,"length2":65},{"diffs":[[0,"    "],[-1,"$('#"],[1,"var "],[0,"pager"],[-1,"').html(createpager(data.Batch, data.BatchLength, data.Total, 'getLink'));\n        }\n    \n    \n        //re select person and tree\n        treeSelect("],[1,"params = { ParentElement: 'pager',\n                Batch: data.Batch,\n                BatchLength: data.BatchLength,\n                Total: data.Total,\n                Function: this.getLink,\n                Context: this\n            };\n            this.ancUtils.createpager(pagerparams);        \n        }    \n        //re select person and tree\n        this.treeSelect();\n        \n        this.ancUtils.addlinks(selectEvents, this.treeSelect, this);\n    },\n\n    treeSelect: function(arg_selectedTree, arg_defaultPerson) {\n    // SELECT SOURCE (CLICK SOURCE NAME)\n    // gets persons for associated tree\n    // high lights selection\n\n        var date = 0;\n        var dateTo = 0;\n        var sourceRef = '';\n        var sourceDesc = '';\n    \n        if (arg_defaultPerson != undefined && arg_selectedTree != undefined) {\n            updateQryPar('selectedTree', arg_selectedTree);\n            updateQryPar('selectedPerson', arg_defaultPerson);\n        }\n    \n        getTreePersons();\n    \n        var found = false;\n        $('#search_bdy .highLightRow').removeClass(\"highLightRow\");\n    \n        var selectedTree = getParameterByName('selectedTree', '');\n\n\n\n        // search all rows for the one we want\n        $('#search_bdy tr').each(function () {\n            $this = $(this);\n            var rowTreeId = $this.find(\"input\").val();\n            // search until we find id of the tree (the source)\n    \n            if (selectedTree == rowTreeId) {\n    \n                found = true;\n    \n                $this.toggleClass('highLightRow');\n    \n                var idx = 0;\n    \n                $(this).find('td span').each(function () {\n    \n                    var tp = $(this).text();\n    \n                    if (idx == 0)\n                        date = tp;\n    \n                    if (idx == 1)\n                        dateTo = tp;\n    \n                    if (idx == 2)\n                        sourceRef = tp;\n    \n                    if (idx == 3)\n                        sourceDesc = tp;\n    \n                    idx++;\n                })\n            }\n        }); //endeach\n\n        $('#txtTreeDesc').val(sourceDesc);\n        $('#txtTreeRef').val(sourceRef);\n        $('#txtTreeDataFrom').val(date);\n        $('#txtTreeDataTo').val(dateTo);\n    \n    \n        $('#dbutton').removeClass('hidePanel').addClass('displayPanel'"],[0,");\n "]],"start1":3590,"start2":3590,"length1":167,"length2":2352},{"diffs":[[0,"el');\n    }\n"],[1,"\n"],[0,"    \n};\n\n\n\n/"]],"start1":5935,"start2":5935,"length1":24,"length2":25},{"diffs":[[0,"}\n\n\n"],[-1,"// SELECT SOURCE (CLICK SOURCE NAME)\n// gets persons for associated tree\n// high lights selection\nfunction treeSelect(arg_selectedTree, arg_defaultPerson) {\n\n    var date = 0;\n    var dateTo = 0;\n    var sourceRef = '';\n    var sourceDesc = '';\n\n    if (arg_defaultPerson != undefined && arg_selectedTree != undefined) {\n        updateQryPar('selectedTree', arg_selectedTree);\n        updateQryPar('selectedPerson', arg_defaultPerson);\n    }\n\n    getTreePersons();\n\n    var found = false;\n    $('#search_bdy .highLightRow').removeClass(\"highLightRow\");\n\n    var selectedTree = getParameterByName('selectedTree', '');\n\n\n\n    // search all rows for the one we want\n    $('#search_bdy tr').each(function () {\n        $this = $(this);\n        var rowTreeId = $this.find(\"input\").val();\n        // search until we find id of the tree (the source)\n\n        if (selectedTree == rowTreeId) {\n\n            found = true;\n\n            $this.toggleClass('highLightRow');\n\n            var idx = 0;\n\n            $(this).find('td span').each(function () {\n\n                var tp = $(this).text();\n\n                if (idx == 0)\n                    date = tp;\n\n                if (idx == 1)\n                    dateTo = tp;\n\n                if (idx == 2)\n                    sourceRef = tp;\n\n                if (idx == 3)\n                    sourceDesc = tp;\n\n                idx++;\n            })\n        }\n    }); //endeach\n\n    $('#txtTreeDesc').val(sourceDesc);\n    $('#txtTreeRef').val(sourceRef);\n    $('#txtTreeDataFrom').val(date);\n    $('#txtTreeDataTo').val(dateTo);\n\n\n    $('#dbutton').removeClass('hidePanel').addClass('displayPanel');\n}\n"],[0,"\n\nfu"]],"start1":7921,"start2":7921,"length1":1643,"length2":8}]],"length":14340,"saved":false}
{"ts":1355172965817,"patch":[[{"diffs":[[0,"tion(arg"],[-1,"_"],[1,"s) {\n        \n        //var args = sid: sourceInfo.SourceId, did: sourceInfo.DefaultPerson \n           \n        if (args !== undefined  ) {                    \n            this.qryStrUtils.updateQryPar('"],[0,"selected"]],"start1":4083,"start2":4083,"length1":17,"length2":219},{"diffs":[[0,"Tree"],[1,"'"],[0,", arg"],[-1,"_defaultPerson) {\n"],[1,"s.sid);\n            this.qryStrUtils.updateQryPar('selectedPerson', args.did);\n        }\n        \n        \n    "],[0,"    "]],"start1":4302,"start2":4302,"length1":31,"length2":125},{"diffs":[[0,"ME)\n    "],[1,"    "],[0,"// gets "]],"start1":4460,"start2":4460,"length1":16,"length2":20},{"diffs":[[0,"ciated tree\n"],[1,"    "],[0,"    // high "]],"start1":4496,"start2":4496,"length1":24,"length2":28},{"diffs":[[0,"   \n"],[-1,"        if (arg_defaultPerson != undefined && arg_selectedTree != undefined) {\n            updateQryPar('selectedTree', arg_selectedTree);\n            updateQryPar('selectedPerson', arg_defaultPerson);\n        }"],[0,"\n   "]],"start1":4646,"start2":4646,"length1":219,"length2":8},{"diffs":[[0,"   \n        "],[1,"this."],[0,"getTreePerso"]],"start1":4652,"start2":4652,"length1":24,"length2":29},{"diffs":[[0," selectedTree = "],[-1,""],[1,"this.qryStrUtils."],[0,"getParameterByNa"]],"start1":4803,"start2":4803,"length1":32,"length2":49},{"diffs":[[0,") {\n            "],[1,"var "],[0,"$this = $(this);"]],"start1":4969,"start2":4969,"length1":32,"length2":36},{"diffs":[[0," = $(this);\n"],[1,"            \n"],[0,"            "]],"start1":4994,"start2":4994,"length1":24,"length2":37},{"diffs":[[0,"dTree =="],[-1,""],[1,"="],[0," rowTree"]],"start1":5166,"start2":5166,"length1":16,"length2":17},{"diffs":[[0," (idx =="],[-1,""],[1,"="],[0," 0)\n    "]],"start1":5455,"start2":5455,"length1":16,"length2":17},{"diffs":[[0," (idx =="],[-1,""],[1,"="],[0," 1)\n    "]],"start1":5530,"start2":5530,"length1":16,"length2":17},{"diffs":[[0," (idx =="],[-1,""],[1,"="],[0," 2)\n    "]],"start1":5607,"start2":5607,"length1":16,"length2":17},{"diffs":[[0," (idx =="],[-1,""],[1,"="],[0," 3)\n    "]],"start1":5687,"start2":5687,"length1":16,"length2":17},{"diffs":[[0,"      })"],[-1,""],[1,";"],[0,"\n       "]],"start1":5783,"start2":5783,"length1":16,"length2":17},{"diffs":[[0,"nel');\n    }"],[-1,"\n"],[1,",\n    \n    getTreePersons: function() {\n\n        //var treePersonUrl = getHost() + \"/GetTreePersons/Select\";\n        var treeId = this.qryStrUtils.getParameterByName('selectedTree', '');\n        \n    \n        var tableBody = '';\n        \n    \n        if (treeId != '00000000-0000-0000-0000-000000000000') {\n            \n            var persondata = function(data){\n                var selectPEvents = [];\n                var count =0;\n                var _idx =0;\n                $.each(data, function (source, sourceInfo) {\n                    count++;\n                    var hidfield = '<input type=\"hidden\" name=\"person_id\" id=\"person_id\" value =\"' + sourceInfo.PersonId + '\"/>';\n    \n                    var selectedPerson = this.qryStrUtils.getParameterByName('selectedPerson', '');\n    \n                    if (sourceInfo.PersonId == selectedPerson) {\n                        tableBody += '<tr class = \"highLightRow\">' + hidfield + '<td><a id= \"p' + _idx + '\" href=\"\" \"><span>' + sourceInfo.BirthYear + ' ' + sourceInfo.ChristianName + ' ' + sourceInfo.Surname + '</span></a></td></tr>';\n                    }\n                    else {\n                        tableBody += '<tr>' + hidfield + '<td><a id= \"p' + _idx + '\" href=\"\" ><span>' + sourceInfo.BirthYear + ' ' + sourceInfo.ChristianName + ' ' + sourceInfo.Surname + '</span></a></td></tr>';    \n                    }\n                    \n                    selectPEvents.push({ key: 'p' + _idx, value: sourceInfo.PersonId});\n                    _idx++;\n                });\n    \n                $('#person_lookup_body').html(tableBody);\n    \n                $('.pSelPer').removeClass('hidePanel').addClass('displayPanel');\n    \n                this.ancUtils.addlinks(selectPEvents, this.processPersonSelect, this);\n            };\n            \n            var params = {};\n            \n            params[0] = treeId;\n            params[1] = $('#txtFrom').val();\n            params[2] = $('#txtTo').val();     \n    \n            this.ancUtils.twaGetJSON('/GetTreePersons/Select', params, $.proxy(persondata, this));\n            \n            \n        }\n    \n        $('#person_lookup_body').html(tableBody);\n    \n        $('#pSelPer').removeClass('hidePanel').addClass('displayPanel');\n\n\n\n\n\n        return false;\n    }"],[0,"\n    \n};\n\n\n\n"]],"start1":6072,"start2":6072,"length1":25,"length2":2304},{"diffs":[[0,"}\n\n\n"],[-1,"function getTreePersons() {\n\n    //var treePersonUrl = getHost() + \"/GetTreePersons/Select\";\n    var treeId = getParameterByName('selectedTree', '');\n    \n\n    var tableBody = '';\n    \n\n    if (treeId != '00000000-0000-0000-0000-000000000000') {\n        var theData = {};\n        var count = 0;\n        theData[0] = treeId;\n        theData[1] = $('#txtFrom').val();\n        theData[2] = $('#txtTo').val();\n\n        twaGetJSON('/GetTreePersons/Select', theData, function (data) {\n        //$.getJSON(treePersonUrl, theData, function (data) {\n\n            $.each(data, function (source, sourceInfo) {\n                count++;\n                var hidfield = '<input type=\"hidden\" name=\"person_id\" id=\"person_id\" value =\"' + sourceInfo.PersonId + '\"/>';\n\n                var selectedPerson = getParameterByName('selectedPerson', '');\n\n                if (sourceInfo.PersonId == selectedPerson) {\n                    tableBody += '<tr class = \"highLightRow\">' + hidfield + '<td><a href=\"\" onClick =\"processPersonSelect(\\'' + sourceInfo.PersonId + '\\');return false\"><span>'\n                    + sourceInfo.BirthYear + ' ' + sourceInfo.ChristianName + ' ' + sourceInfo.Surname + '</span></a></td></tr>';\n                }\n                else {\n                    tableBody += '<tr>' + hidfield + '<td><a href=\"\" onClick =\"processPersonSelect(\\'' + sourceInfo.PersonId + '\\');return false\"><span>'\n                    + sourceInfo.BirthYear + ' ' + sourceInfo.ChristianName + ' ' + sourceInfo.Surname + '</span></a></td></tr>';\n\n                }\n            });\n\n            $('#person_lookup_body').html(tableBody);\n\n            $('.pSelPer').removeClass('hidePanel').addClass('displayPanel');\n\n        });\n    }\n\n    $('#person_lookup_body').html(tableBody);\n\n    $('#pSelPer').removeClass('hidePanel').addClass('displayPanel');\n\n    return false;\n}"],[0,"\n\n\n\n"]],"start1":13555,"start2":13555,"length1":1856,"length2":8}]],"length":14909,"saved":false}
{"ts":1355176005313,"patch":[[{"diffs":[[0,"                "],[-1,""],[1,"var that = this;\n                "],[0,"$.each(data, fun"]],"start1":6548,"start2":6548,"length1":32,"length2":65},{"diffs":[[0,"dPerson = th"],[-1,"is"],[1,"at"],[0,".qryStrUtils"]],"start1":6837,"start2":6837,"length1":26,"length2":26},{"diffs":[[0,"html(tableBody);"],[-1,"\n"],[0,"    \n           "]],"start1":7702,"start2":7702,"length1":33,"length2":32},{"diffs":[[0,"playPanel');"],[-1,"\n"],[0,"    \n       "]],"start1":7791,"start2":7791,"length1":25,"length2":24},{"diffs":[[0,";\n            };"],[-1,"\n"],[0,"            \n   "]],"start1":7893,"start2":7893,"length1":33,"length2":32},{"diffs":[[0,"ms = {};"],[-1,"\n"],[0,"        "]],"start1":7942,"start2":7942,"length1":17,"length2":16},{"diffs":[[0," this));"],[-1,"\n"],[0,"        "]],"start1":8183,"start2":8183,"length1":17,"length2":16},{"diffs":[[0,"            "],[-1,"\n        "],[0,"    \n       "]],"start1":8191,"start2":8191,"length1":33,"length2":24},{"diffs":[[0,"leBody);"],[-1,"\n"],[0,"    \n   "]],"start1":8264,"start2":8264,"length1":17,"length2":16},{"diffs":[[0,"nel');\n\n"],[-1,"\n\n\n\n"],[0,"        "]],"start1":8343,"start2":8343,"length1":20,"length2":16},{"diffs":[[0,"   }"],[1,","],[0,"\n    \n"],[-1,"};\n\n\n\n//$(document).ready(function () {\n//"],[1,"    //SET DEFAULT PERSON FOR SELECTED TREE\n    processPersonSelect: function(evt) {        \n        this.qryStrUtils.updateQryPar('selectedPerson', evt);\n    \n        $('#person_lookup_body tr').each(function () {\n            var $this = $(this);\n  "],[0,"  "],[1,"\n"],[0,"  "],[-1,"createHeader('#1"],[1,"          var quantity = $this.find(\"input\").val();\n            if (evt == quantity) {\n                $('#person_lookup_body tr.highLightRow').toggleClass('highLightRow');\n    \n                $this.toggleClass('highLightRow');\n                        \n                var theData = {};\n    \n                theData.sourceId = this.qryStrUtils.getParameterByName('selectedTree', '');\n                theData.personId = this.qryStrUtils.getParameterByName('selectedPerson', '"],[0,"');\n"],[-1,"//    refreshData();\n//});\n\n\n\n// called from pager\n\n\n\n"],[1,"     \n                this.postParams.url = '/settreepersons/Set';\n                this.postParams.data = theData;\n                this.ancUtils.twaPostJSON(this.postParams);             \n            }\n    \n        });        //endeach\n\n    },\n    \n    newTree: function() {\n\n        this.qryStrUtils.updateQryPar('selectedTree', '00000000-0000-0000-0000-000000000000');\n        this.qryStrUtils.updateQryPar('selectedPerson', '00000000-0000-0000-0000-000000000000');\n    \n    //    date = 0;\n    //    dateTo = 0;\n    //    sourceRef = '';\n    //    sourceDesc = '';\n    \n        $('#txtTreeDesc').val('');\n        $('#txtTreeRef').val('');\n        $('#txtTreeDataFrom').val(1500);\n        $('#txtTreeDataTo').val(1900);\n    \n        $('#dbutton').addClass('hidePanel').removeClass('displayPanel');\n    \n        this.treeSelect();\n\n    }\n\n\n};"],[0,"\n\n "],[1,"\n "],[0,"\n\n//"]],"start1":8374,"start2":8374,"length1":137,"length2":1596},{"diffs":[[0,"ta.\n"],[-1,"function writeTreeSources(data) {\n    \n    var tableBody = '';\n\n    var selectedTree = getParameterByName('selectedTree', '');\n\n    $.each(data.serviceSources, function (source, sourceInfo) {\n        //<a href='' class=\"button\" ><span>Main</span></a>\n        var hidfield = '<input type=\"hidden\" name=\"source_id\" id=\"source_id\" value =\"' + sourceInfo.SourceId + '\"/>';\n\n        if (selectedTree == sourceInfo.SourceId) {\n            tableBody += '<tr class = \"highLightRow\">' + hidfield;\n         //   selectedTreeRow = false;\n        }\n        else {\n            tableBody += '<tr>' + hidfield;\n        }\n\n        tableBody += '<td><div>' + sourceInfo.SourceYear + '</div></td>';\n        tableBody += '<td><div>' + sourceInfo.SourceYearTo + '</div></td>';\n        tableBody += '<td><a href=\"\" onClick =\"treeSelect(\\'' + sourceInfo.SourceId + '\\',\\'' + sourceInfo.DefaultPerson + '\\');return false\"><div>' + sourceInfo.SourceRef + '</div></a></td>';\n        tableBody += '<td><div>' + sourceInfo.SourceDesc + '</div></td>';\n\n        tableBody += '<td><a href=\"../HtmlPages/AncestorsTree.html#?id=' + sourceInfo.DefaultPerson + '&zoom=100&xpos=0&ypos=600&isAnc=1#Dec\"><div>Ancestor view</div></a></td>';\n\n        tableBody += '<td><a href=\"../HtmlPages/DescendantsTree.html#?sid=' + sourceInfo.SourceId + '&id=' + sourceInfo.DefaultPerson + '&zoom=100&xpos=0&ypos=0&isAnc=1#Dec\"><div>Family View</div></a></td>';\n\n        tableBody += '</tr>';\n    });\n\n\n    if (tableBody != '') {\n        $('#search_bdy').html(tableBody);\n\n\n        $('#reccount').html(data.Total + ' Trees Found');\n\n        //create pager based on results\n\n        $('#pager').html(createpager(data.Batch, data.BatchLength, data.Total, 'getLink'));\n    }\n\n\n    //re select person and tree\n    treeSelect();\n}\n\n\n\n\nfunction newTree() {\n\n    updateQryPar('selectedTree', '00000000-0000-0000-0000-000000000000');\n    updateQryPar('selectedPerson', '00000000-0000-0000-0000-000000000000');\n\n//    date = 0;\n//    dateTo = 0;\n//    sourceRef = '';\n//    sourceDesc = '';\n\n    $('#txtTreeDesc').val('');\n    $('#txtTreeRef').val('');\n    $('#txtTreeDataFrom').val(1500);\n    $('#txtTreeDataTo').val(1900);\n\n    $('#dbutton').addClass('hidePanel').removeClass('displayPanel');\n\n    treeSelect();\n\n}"],[1,"\n\n\n\n"],[0,"\n\n\n/"]],"start1":10033,"start2":10033,"length1":2265,"length2":12},{"diffs":[[0,"\n}\n\n"],[-1,"\n\n\n\n\n//SET DEFAULT PERSON FOR SELECTED TREE\nfunction processPersonSelect(evt) {\n\n    var setDefaultPersonUrl = getHost() + \"/settreepersons/Set\";\n\n    updateQryPar('selectedPerson', evt);\n\n    $('#person_lookup_body tr').each(function () {\n        $this = $(this)\n\n        var quantity = $this.find(\"input\").val();\n        if (evt == quantity) {\n            $('#person_lookup_body tr.highLightRow').toggleClass('highLightRow');\n\n            $this.toggleClass('highLightRow');\n                    \n            var theData = {};\n\n            theData.sourceId = getParameterByName('selectedTree', '');\n            theData.personId = getParameterByName('selectedPerson', '');\n\n            // $.post(setDefaultPersonUrl, JSON.stringify(theData));\n\n//            var stringy = JSON.stringify(theData);\n\n//            $.ajax({\n//                cache: false,\n//                type: \"POST\",\n//                async: false,\n//                url: setDefaultPersonUrl,\n//                data: stringy,\n//                contentType: \"application/json\",\n//                dataType: \"json\",\n//                success: function (department) {\n//                    //  alert('finished');\n//                }\n//            });\n\n\n            twaPostJSON('/settreepersons/Set', theData, '', '');\n        }\n\n    });        //endeach\n\n    \n\n\n}\n\n           \n\n\n      "],[0,"  \n"]],"start1":12774,"start2":12774,"length1":1355,"length2":7}]],"length":12781,"saved":false}
{"ts":1355176720413,"patch":[[{"diffs":[[0,"   }"],[-1,"\n\n\n};\n\n \n \n\n// this can find out what page its on based on the\n// returned data.\n\n\n\n\n\n\n\n"],[1,",\n    \n    "],[0,"//li"]],"start1":9952,"start2":9952,"length1":96,"length2":19},{"diffs":[[0,"d panel\n"],[-1,"function"],[1,"   "],[0," saveTre"]],"start1":9996,"start2":9996,"length1":24,"length2":19},{"diffs":[[0,"saveTree"],[1,": function"],[0,"() {\n"],[1,"    "],[0,"    //if"]],"start1":10008,"start2":10008,"length1":21,"length2":35},{"diffs":[[0," some data \n"],[1,"    "],[0,"    //then w"]],"start1":10072,"start2":10072,"length1":24,"length2":28},{"diffs":[[0,"    "],[-1,"//\n"],[1,"    //\n    "],[0,"    "]],"start1":10131,"start2":10131,"length1":11,"length2":19},{"diffs":[[0,"d data \n    "],[1,"    "],[0,"//then we ar"]],"start1":10210,"start2":10210,"length1":24,"length2":28},{"diffs":[[0,"new one\n"],[1,"    "],[0,"    var "]],"start1":10249,"start2":10249,"length1":16,"length2":20},{"diffs":[[0,"Id').val();\n    "],[1,"    "],[0,"var sourceDesc ="]],"start1":10292,"start2":10292,"length1":32,"length2":36},{"diffs":[[0,".val();\n    "],[1,"    "],[0,"var sourceRe"]],"start1":10346,"start2":10346,"length1":24,"length2":28},{"diffs":[[0,"reeRef').val();\n"],[1,"    "],[0,"    var date = $"]],"start1":10386,"start2":10386,"length1":32,"length2":36},{"diffs":[[0,"om').val();\n"],[1,"    "],[0,"    var date"]],"start1":10438,"start2":10438,"length1":24,"length2":28},{"diffs":[[0,"val();\n "],[-1,"\n\n"],[1,"       var selectedTree = this.qryStrUtils.getParameterByName('selectedTree', '');\n\n    "],[0,"    var "]],"start1":10491,"start2":10491,"length1":18,"length2":104},{"diffs":[[0," false;\n    "],[1,"    "],[0,"var errorMes"]],"start1":10604,"start2":10604,"length1":24,"length2":28},{"diffs":[[0,"e = '';\n"],[-1,"\n"],[1,"    \n    "],[0,"    if ("]],"start1":10635,"start2":10635,"length1":17,"length2":25},{"diffs":[[0,"To))) {\n        "],[1,"    "],[0,"isError = true;\n"]],"start1":10688,"start2":10688,"length1":32,"length2":36},{"diffs":[[0,"isError = true;\n"],[1,"    "],[0,"        errorMes"]],"start1":10708,"start2":10708,"length1":32,"length2":36},{"diffs":[[0,"tered';\n"],[1,"    "],[0,"    }\n"],[1,"    "],[0,"    else"]],"start1":10769,"start2":10769,"length1":22,"length2":30},{"diffs":[[0,"\n        else {\n"],[1,"    "],[0,"        if (date"]],"start1":10786,"start2":10786,"length1":32,"length2":36},{"diffs":[[0,") {\n            "],[1,"    "],[0,"isError = true;\n"]],"start1":10878,"start2":10878,"length1":32,"length2":36},{"diffs":[[0,"isError = true;\n"],[1,"    "],[0,"            erro"]],"start1":10898,"start2":10898,"length1":32,"length2":36},{"diffs":[[0,"    "],[-1,"}\n"],[1,"    }\n  "],[0,"    "],[1,"  "],[0,"}\n\n"],[1,"    "],[0,"    "]],"start1":10972,"start2":10972,"length1":17,"length2":29},{"diffs":[[0,"eDesc =="],[1,"="],[0," '') {\n"],[1,"    "],[0,"        "]],"start1":11010,"start2":11010,"length1":23,"length2":28},{"diffs":[[0,"= true;\n        "],[1,"    "],[0,"errorMessage += "]],"start1":11046,"start2":11046,"length1":32,"length2":36},{"diffs":[[0,"ption';\n    "],[-1,"}\n\n"],[1,"    }\n    \n    "],[0,"    if (sour"]],"start1":11101,"start2":11101,"length1":27,"length2":39},{"diffs":[[0,"ceRef =="],[1,"="],[0," '') {\n "]],"start1":11140,"start2":11140,"length1":16,"length2":17},{"diffs":[[0,"= '') {\n        "],[1,"    "],[0,"isError = true;\n"]],"start1":11148,"start2":11148,"length1":32,"length2":36},{"diffs":[[0,"= true;\n        "],[1,"    "],[0,"errorMessage += "]],"start1":11176,"start2":11176,"length1":32,"length2":36},{"diffs":[[0,"rence';\n    "],[-1,"}\n\n"],[1,"    }\n    \n    "],[0,"    if (tree"]],"start1":11229,"start2":11229,"length1":27,"length2":39},{"diffs":[[0,"(treeName =="],[1,"="],[0," '') {\n     "]],"start1":11263,"start2":11263,"length1":24,"length2":25},{"diffs":[[0,"= '') {\n        "],[1,"    "],[0,"isError = true;\n"]],"start1":11275,"start2":11275,"length1":32,"length2":36},{"diffs":[[0,"= true;\n        "],[1,"    "],[0,"errorMessage += "]],"start1":11303,"start2":11303,"length1":32,"length2":36},{"diffs":[[0,"    "],[-1,"}\n\n\n\n\n"],[1,"    }\n\n    "],[0,"    "]],"start1":11364,"start2":11364,"length1":14,"length2":19},{"diffs":[[0,"    "],[-1,"    // $.post(setDefaultPersonUrl, JSON.stringify(theData));\n        //sourceId, string fileName, string sourceRef, string sourceDesc, string sourceYear, string sourceYearTo\n\n       // var saveSourceUrl = getHost() + \"/SaveTree/Save\""],[1,"\n            var theData = {}"],[0,";\n    "],[1,"\n"],[0,"    "],[-1,"var theData = {};\n\n"],[0,"    "]],"start1":11399,"start2":11399,"length1":270,"length2":48},{"diffs":[[0,"ectedTree);\n"],[1,"    "],[0,"        theD"]],"start1":11480,"start2":11480,"length1":24,"length2":28},{"diffs":[[0,"eName);\n        "],[1,"    "],[0,"theData.sourceRe"]],"start1":11533,"start2":11533,"length1":32,"length2":36},{"diffs":[[0,"ceRef);\n        "],[1,"    "],[0,"theData.sourceDe"]],"start1":11584,"start2":11584,"length1":32,"length2":36},{"diffs":[[0,"eDesc);\n        "],[1,"    "],[0,"theData.sourceYe"]],"start1":11637,"start2":11637,"length1":32,"length2":36},{"diffs":[[0,"= String(date);\n"],[1,"    "],[0,"        theData."]],"start1":11676,"start2":11676,"length1":32,"length2":36},{"diffs":[[0,");\n\n"],[-1,"\n//"],[0,"        "],[-1,"var stringy = JSON.stringify(theData);\n\n//        $.ajax({\n//            cache: false,\n//            type: \"POST\",\n//            async: false,\n//            url: saveSourceUrl,\n//            data: stringy,\n//            contentType: \"application/json\",\n//            dataType: \"json\",\n//            success: function (department) {\n//                //  alert('finished');\n//            }\n//        });\n\n        twaPostJSON('/SaveTree/Save', theData, '', '', function (args) {\n            refreshWithErrorHandler(refreshData, args);\n        });\n\n        //refresh sources\n        //refreshData();       \n        \n\n        //<div class=\"fileupload-content\">\n        //<table class=\"files\"></table>\n        //</div>\n\n"],[1,"    this.postParams.url = '/SaveTree/Save';\n            this.postParams.data = theData;\n            this.ancUtils.twaPostJSON(this.postParams);\n\n    "],[0,"    "]],"start1":11740,"start2":11740,"length1":734,"length2":165},{"diffs":[[0,"dTree =="],[1,"="],[0," '000000"]],"start1":11920,"start2":11920,"length1":16,"length2":17},{"diffs":[[0,"dTree =="],[1,"="],[0," '') {\n "]],"start1":11979,"start2":11979,"length1":16,"length2":17},{"diffs":[[0,"            "],[1,"    this."],[0,"newTree();\n "]],"start1":11995,"start2":11995,"length1":24,"length2":33},{"diffs":[[0,"Tree();\n        "],[1,"    "],[0,"}\n"],[-1,"\n"],[1,"    \n    "],[0,"        $('#file"]],"start1":12019,"start2":12019,"length1":35,"length2":47},{"diffs":[[0,"');\n"],[-1,"\n"],[1,"    \n  "],[0,"    "],[1,"  "],[0,"}\n    "],[1,"    "],[0,"else"]],"start1":12130,"start2":12130,"length1":19,"length2":31},{"diffs":[[0,"        "],[1,"    "],[0,"alert(er"]],"start1":12164,"start2":12164,"length1":16,"length2":20},{"diffs":[[0,"    "],[-1,"}\n\n\n}"],[1,"    }\n\n\n    }\n\n\n\n};\n\n \n \n\n// this can find out what page its on based on the\n// returned data.\n\n\n\n\n\n\n"],[0,"\n\n  "]],"start1":12197,"start2":12197,"length1":13,"length2":109}]],"length":12307,"saved":false}
{"ts":1355176765226,"patch":[[{"diffs":[[0,"= function () {\n"],[1,"    this.qryStrUtils = new QryStrUtils();\n    this.ancUtils = new AncUtils();\n"],[0,"    \n    this.po"]],"start1":271,"start2":271,"length1":32,"length2":110}]],"length":12385,"saved":false}
{"ts":1355176822981,"patch":[[{"diffs":[[0,"    "],[-1,"\n    // called from refresh button that gives it page 0 as default."],[1,"init :function(){\n        \n        \n    },    "],[0,"\n   "]],"start1":592,"start2":592,"length1":75,"length2":54},{"diffs":[[0,"  },"],[-1,"\n"],[0,"   "],[-1," // returned data."],[0,"\n   "]],"start1":1729,"start2":1729,"length1":30,"length2":11},{"diffs":[[0,"\n    },\n"],[-1,"\n"],[0,"    tree"]],"start1":4092,"start2":4092,"length1":17,"length2":16},{"diffs":[[0,"yPanel');\n    },"],[-1,"\n"],[0,"    \n    getTree"]],"start1":6106,"start2":6106,"length1":33,"length2":32},{"diffs":[[0,"alse;\n    },"],[-1,"\n"],[0,"    \n    //S"]],"start1":8403,"start2":8403,"length1":25,"length2":24},{"diffs":[[0,"/endeach\n\n    },"],[-1,"\n"],[0,"    \n    newTree"]],"start1":9380,"start2":9380,"length1":33,"length2":32},{"diffs":[[0,"t();\n\n    },"],[-1,"\n"],[0,"    \n    //l"]],"start1":9979,"start2":9979,"length1":25,"length2":24},{"diffs":[[0,"}\n\n\n"],[1,""],[0,"    }\n\n"],[-1,"\n\n"],[0,"};\n\n"]],"start1":12238,"start2":12238,"length1":17,"length2":15}]],"length":12338,"saved":false}
{"ts":1355179611832,"patch":[[{"diffs":[[0,"       \n        "],[1,"var panels = new Panels();\n\n        $(\"#main\").live(\"click\", $.proxy(function () { panels.sourcesShowPanel('1'); return false; }, panels));\n        $(\"#more\").live(\"click\", $.proxy(function () { panels.sourcesShowPanel('2'); return false; }, panels));\n        $(\"#additional\").live(\"click\", $.proxy(function () { panels.sourcesShowPanel('3'); return false; }, panels));\n        $(\"#refresh\").live(\"click\", $.proxy(function () { this.getSources(); return false; }, this));\n\n\n        $(\"#add\").live(\"click\", $.proxy(function () { this.addSource('00000000-0000-0000-0000-000000000000'); return false; }, this));\n        $(\"#delete\").live(\"click\", $.proxy(function () { this.deleteSources(); return false; }, this));\n        $(\"#print\").live(\"click\", $.proxy(function () { this.printableSources(); return false; }, this));\n        $(\"#select_return\").live(\"click\", $.proxy(function () { this.returnselection(); return false; }, this));\n\n        $(\"#sdate\").live(\"click\", $.proxy(function () { this.sort(\"SourceDate\"); return false; }, this));\n        $(\"#sref\").live(\"click\", $.proxy(function () { this.sort(\"SourceRef\"); return false; }, this));\n        $(\"#sdesc\").live(\"click\", $.proxy(function () { this.sort(\"SourceDescription\"); return false; }, this));\n   \n   \n        this.getTreeSources();"],[0,"\n    },"],[1,"   \n"],[0,"    \n    getTree"]],"start1":615,"start2":615,"length1":39,"length2":1337}]],"length":13636,"saved":false}
{"ts":1355179696888,"patch":[[{"diffs":[[0,"$(\"#"],[-1,"more"],[1,"persons"],[0,"\").l"]],"start1":779,"start2":779,"length1":12,"length2":15},{"diffs":[[0,"$(\"#"],[-1,"additional"],[1,"imports"],[0,"\").l"]],"start1":894,"start2":894,"length1":18,"length2":15},{"diffs":[[0,"e; }, panels));\n"],[1,"        \n"],[0,"        $(\"#refr"]],"start1":985,"start2":985,"length1":32,"length2":41}]],"length":13645,"saved":false}
{"ts":1355179779648,"patch":[[{"diffs":[[0,"this.get"],[1,"Tree"],[0,"Sources("]],"start1":1068,"start2":1068,"length1":16,"length2":20}]],"length":13649,"saved":false}
{"ts":1355182835731,"patch":[[{"diffs":[[0,"se; }, panels));"],[-1,"\n"],[0,"        \n       "]],"start1":984,"start2":984,"length1":33,"length2":32},{"diffs":[[0,"this));\n"],[-1,"\n\n"],[0,"        "]],"start1":1107,"start2":1107,"length1":18,"length2":16},{"diffs":[[0,"    $(\"#"],[-1,"add"],[1,"deltree"],[0,"\").live("]],"start1":1119,"start2":1119,"length1":19,"length2":23},{"diffs":[[0,"his."],[-1,"addSource('00000000-0000-0000-0000-000000000000'"],[1,"deleteTree("],[0,"); r"]],"start1":1174,"start2":1174,"length1":56,"length2":19},{"diffs":[[0,"alse; }, this));"],[1,"            "],[0,"\n        $(\"#del"]],"start1":1200,"start2":1200,"length1":32,"length2":44},{"diffs":[[0,"    $(\"#"],[-1,"delet"],[1,"newtre"],[0,"e\").live"]],"start1":1233,"start2":1233,"length1":21,"length2":22},{"diffs":[[0,"his."],[-1,"deleteSources"],[1,"newTree"],[0,"(); "]],"start1":1288,"start2":1288,"length1":21,"length2":15},{"diffs":[[0,"    $(\"#"],[-1,"print"],[1,"savetree"],[0,"\").live("]],"start1":1332,"start2":1332,"length1":21,"length2":24},{"diffs":[[0,"his."],[-1,"printableSources"],[1,"saveTree"],[0,"(); "]],"start1":1388,"start2":1388,"length1":24,"length2":16},{"diffs":[[0,"lse; }, this));\n"],[1,"        \n        \n        \n        \n        \n"],[0,"        $(\"#sele"]],"start1":1413,"start2":1413,"length1":32,"length2":77}]],"length":13660,"saved":false}
{"ts":1355182885568,"patch":[[{"diffs":[[0,"    "],[-1,"\n"],[0,"       "],[-1," \n        \n        \n        \n        $(\"#select_return\").live(\"click\", $.proxy(function () { this.returnselection(); return false; }, this));\n\n        $(\"#sdate\").live(\"click\", $.proxy(function () { this.sort(\"SourceDate\"); return false; }, this));\n        $(\"#sref\").live(\"click\", $.proxy(function () { this.sort(\"SourceRef\"); return false; }, this));\n        $(\"#sdesc\").live(\"click\", $.proxy(function () { this.sort(\"SourceDescription\"); return false; }, this));\n   \n   "],[0,"\n   "]],"start1":1433,"start2":1433,"length1":489,"length2":15}]],"length":13186,"saved":false}
