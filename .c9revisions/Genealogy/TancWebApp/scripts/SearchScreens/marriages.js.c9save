{"ts":1354536153814,"silentsave":true,"restoring":false,"patch":[[{"diffs":[[1,"ï»¿\n//var url = getHost() + \"/Marriages/GetMarriages/Select\";\n\n\n//var selection = new Array();\n//var parishId = '';\n\n\n\n\n$(document).ready(function () {\n    var jsMaster = new JSMaster();\n    var ancMarriages = new AncMarriages();\n\n    jsMaster.generateHeader('#1', function () {\n        ancMarriages.init();\n\n    });\n\n});\n\n\nvar AncMarriages = function () {\n    this.qryStrUtils = new QryStrUtils();\n    this.ancUtils = new AncUtils();\n    this.selection = new Array();\n    this.parishId = '';\n    this.postParams = { \n        url: '',\n        data: '',\n        idparam: undefined,\n        refreshmethod: this.getMarriages,\n        refreshArgs: ['1'],\n        Context: this\n    };\n \n}\n\nAncMarriages.prototype = {\n\n    init: function () {\n        var isActive = this.qryStrUtils.getParameterByName('active', '');\n\n\n        var panels = new Panels();\n\n\n\n        $(\"#main\").live(\"click\", $.proxy(function () { panels.sourcesShowPanel('1'); return false; }, panels));\n        $(\"#more\").live(\"click\", $.proxy(function () { panels.sourcesShowPanel('2'); return false; }, panels));\n\n        $(\"#refresh\").live(\"click\", $.proxy(function () { this.getMarriages(\"0\"); return false; }, this));\n\n        $(\"#add\").live(\"click\", $.proxy(function () { this.addMarriage('00000000-0000-0000-0000-000000000000'); return false; }, this));\n        $(\"#delete\").live(\"click\", $.proxy(function () { this.DeleteRecord(); return false; }, this));\n        $(\"#print\").live(\"click\", $.proxy(function () { this.PrintableResults(); return false; }, this));\n        $(\"#dupe\").live(\"click\", $.proxy(function () { this.SetDuplicates(); return false; }, this));\n        $(\"#merge\").live(\"click\", $.proxy(function () { this.SetMergeMarriages(); return false; }, this));\n        $(\"#remove\").live(\"click\", $.proxy(function () { this.SetRemoveLink(); return false; }, this));\n\n        $(\"#year_hed\").live(\"click\", $.proxy(function () { this.sort('MarriageDate'); return false; }, this));\n        $(\"#mcname_hed\").live(\"click\", $.proxy(function () { this.sort('MaleCName'); return false; }, this));\n        $(\"#msname_hed\").live(\"click\", $.proxy(function () { this.sort('MaleSName'); return false; }, this));\n        $(\"#fcname_hed\").live(\"click\", $.proxy(function () { this.sort('FemaleCName'); return false; }, this));\n        $(\"#fsname_hed\").live(\"click\", $.proxy(function () { this.sort('FemaleSName'); return false; }, this));\n\n        $(\"#locat_hed\").live(\"click\", $.proxy(function () { this.sort('MarriageLocation'); return false; }, this));\n\n\n\n\n        if (isActive == '1') {\n            $('#txtMaleCName').val(this.qryStrUtils.getParameterByName('mcname', ''));\n            $('#txtMaleSName').val(this.qryStrUtils.getParameterByName('msname', ''));\n            $('#txtFemaleCName').val(this.qryStrUtils.getParameterByName('fcname', ''));\n            $('#txtFemaleSName').val(this.qryStrUtils.getParameterByName('fsname', ''));\n            $('#txtLocation').val(this.qryStrUtils.getParameterByName('locat', ''));\n\n            $('#txtLowerDateRangeLower').val(this.qryStrUtils.getParameterByName('ldrl', ''));\n            $('#txtLowerDateRangeUpper').val(this.qryStrUtils.getParameterByName('ldru', ''));\n\n            this.parishId = this.qryStrUtils.getParameterByName('parid', '');\n\n            this.getMarriages('1');\n        }\n\n\n    },\n\n    createQryString: function () {\n\n        var args = {\n            \"active\": '1',\n            \"mcname\": $('#txtMaleCName'),\n            \"msname\": $('#txtMaleSName'),\n            \"fcname\": $('#txtFemaleCName'),\n            \"fsname\": $('#txtFemaleSName'),\n            \"locat\": $('#txtLocation'),\n            \"ldrl\": $('#txtLowerDateRangeLower'),\n            \"ldru\": $('#txtLowerDateRangeUpper'),\n            \"parid\": this.parishId\n        };\n\n\n        this.qryStrUtils.updateQry(args);\n\n    },\n\n    getMarriages: function (showdupes) {\n        console.time('getMarriages');\n        var parentId = '';\n        if (showdupes == '0') {\n            this.qryStrUtils.updateQryPar('_parentId', parentId);\n        }\n        else {\n            parentId = this.qryStrUtils.getParameterByName('_parentId', '');\n        }\n\n        var params = {};\n        params[0] = parentId;\n        params[1] = String($('#txtMaleCName').val());\n        params[2] = String($('#txtMaleSName').val());\n        params[3] = String($('#txtFemaleCName').val());\n        params[4] = String($('#txtFemaleSName').val());\n        params[5] = String($('#txtLocation').val());\n        params[6] = String($('#txtLowerDateRangeLower').val());\n        params[7] = String($('#txtLowerDateRangeUpper').val());\n        params[8] = '';\n        params[9] = this.qryStrUtils.getParameterByName('parid', '');\n        params[10] = String(this.qryStrUtils.getParameterByName('page', 0));\n        params[11] = '30';\n        params[12] = this.qryStrUtils.getParameterByName('sort_col', 'MarriageDate');\n\n        this.ancUtils.twaGetJSON('/Marriages/GetMarriages/Select', params, $.proxy(this.marriageResult, this));\n\n        this.createQryString();\n\n        return false;\n    },\n\n\n    marriageResult: function (data) {\n\n        console.time('result');\n\n        var tableBody = '';\n        var visibleRecords = new Array();\n\n        var dupeEvents = new Array();\n        var selectEvents = new Array();\n\n        var _idx = 0;\n\n        var that = this;\n\n        $.each(data.serviceMarriages, function (source, sourceInfo) {\n\n            var hidPID = '<input type=\"hidden\" name=\"MarriageId\" id=\"MarriageId\" value =\"' + sourceInfo.MarriageId + '\"/>';\n            var hidParID = '<input type=\"hidden\" name=\"parent_id\" id=\"parent_id\" value =\"' + sourceInfo.XREF + '\"/>';\n\n            var arIdx = jQuery.inArray(sourceInfo.MarriageId, that.selection);\n\n            if (arIdx >= 0) {\n                tableBody += '<tr class = \"highLightRow\">' + hidPID + hidParID;\n            }\n            else {\n                tableBody += '<tr>' + hidPID + hidParID;\n            }\n\n            var _loc = window.location.hash;\n            _loc = that.qryStrUtils.updateStrForQry(_loc, 'id', sourceInfo.MarriageId);\n\n            tableBody += '<td><a id= \"d' + _idx + '\" href=\"\"><div>' + sourceInfo.Events + '</div></a></td>';\n            dupeEvents.push({ key: 'd' + _idx, value: sourceInfo.XREF });\n\n            tableBody += '<td><a id= \"s' + _idx + '\" href=\"\"><div>' + sourceInfo.MarriageDate + '</div></a></td>';\n            selectEvents.push({ key: 's' + _idx, value: sourceInfo.MarriageId });\n\n            tableBody += '<td><a href=\"../HtmlPages/MarriageEditor.html' + _loc + '\"><div> Edit </div></a></td>';\n\n            tableBody += '<td><div>' + sourceInfo.MaleCName + '</div></td>';\n            tableBody += '<td><div>' + sourceInfo.MaleSName + '</div></td>';\n            tableBody += '<td><div>' + sourceInfo.FemaleCName + '</div></td>';\n            tableBody += '<td><div>' + sourceInfo.FemaleSName + '</div></td>';\n            tableBody += '<td><div>' + sourceInfo.MarriageLocation + '</div></td>';\n            tableBody += '<td><div>' + sourceInfo.Witnesses + '</div></td>';\n            tableBody += '</tr>';\n\n            visibleRecords.push(sourceInfo.MarriageId);\n\n            _idx++;\n        });\n\n        if (this.selection != undefined) {\n            this.selection = this.selection.RemoveInvalid(visibleRecords);\n        }\n\n        if (tableBody != '') {\n\n            $('#search_bdy').html(tableBody);\n\n            //create pager based on results\n            var pagerparams = { ParentElement: 'pager',\n                Batch: data.Batch,\n                BatchLength: data.BatchLength,\n                Total: data.Total,\n                Function: this.getLink,\n                Context: this\n            };\n\n            this.ancUtils.createpager(pagerparams);\n\n            $('#reccount').html(data.Total + ' Marriages');\n        }\n        else {\n\n            $('#search_bdy').html(tableBody);\n            $('#reccount').html('0 Marriages');\n        }\n\n\n        this.ancUtils.addlinks(dupeEvents, this.loadDupes, this);\n\n        this.ancUtils.addlinks(selectEvents, this.processSelect, this);\n        console.timeEnd('getMarriages');\n        console.timeEnd('result');\n        console.log('result ended');\n    },\n\n    loadDupes: function (id) {\n        this.qryStrUtils.updateQryPar('_parentId', id);\n        this.getMarriages('1');\n    },\n\n    processSelect: function (evt) {\n        this.ancUtils.handleSelection(evt, this.selection, '#search_bdy tr', \"#MarriageId\");\n    },\n\n    getLink: function (toPage) {\n        this.qryStrUtils.updateQryPar('page', toPage);\n        this.getMarriages('1');\n    },\n\n    sort: function (sort_col) {\n        this.ancUtils.sort_inner(sort_col);\n        this.getMarriages('1');\n    },\n\n    DeleteRecord: function () {\n        this.postParams.url = '/Marriages/Delete';\n        this.postParams.data = { marriage: this.ancUtils.convertToCSV(this.selection) };\n        this.ancUtils.twaPostJSON(this.postParams);\n    },\n\n    SetDuplicates: function () {\n        this.postParams.url = '/Marriages/SetDuplicate';\n        this.postParams.data = { marriages: this.ancUtils.convertToCSV(this.selection) };\n        this.ancUtils.twaPostJSON(this.postParams);\n    },\n\n    SetRemoveLink: function () {\n        this.postParams.url = '/Marriages/RemoveLinks';\n        this.postParams.data = { marriage: this.ancUtils.convertToCSV(this.selection) };\n        this.ancUtils.twaPostJSON(this.postParams);\n    },\n\n    SetMergeMarriages: function () {\n        this.postParams.url = '/Marriages/MergeMarriages';\n        this.postParams.data = { marriage: this.ancUtils.convertToCSV(this.selection) };\n        this.ancUtils.twaPostJSON(this.postParams);\n    },\n\n    addMarriage: function (path) {\n        window.location.href = '../HtmlPages/MarriageEditor.html#' + this.qryStrUtils.makeIdQryString('id', path);\n    }\n}\n\n\n\n \n//function imready() {\n\n//    var isActive = getParameterByName('active', '');\n\n//    if (isActive == '1') {\n//        $('#txtMaleCName').val(getParameterByName('mcname', ''));\n//        $('#txtMaleSName').val(getParameterByName('msname', ''));\n//        $('#txtFemaleCName').val(getParameterByName('fcname', ''));\n//        $('#txtFemaleSName').val(getParameterByName('fsname', ''));\n//        $('#txtLocation').val(getParameterByName('locat', ''));\n\n//        $('#txtLowerDateRangeLower').val(getParameterByName('ldrl', ''));\n//        $('#txtLowerDateRangeUpper').val(getParameterByName('ldru', ''));\n\n//        parishId = getParameterByName('parid', '');\n\n//        getMarriages('1');\n//    }\n//}\n\n\n//function createQryString(page) {\n\n\n\n//    updateQryPar('active', '1');\n\n//    var workingQry = window.location.hash;\n\n//    workingQry = updateStrForQry(workingQry, 'mcname', $('#txtMaleCName').val());\n//    workingQry = updateStrForQry(workingQry, 'msname', $('#txtMaleSName').val());\n//    workingQry = updateStrForQry(workingQry, 'fcname', $('#txtFemaleCName').val());\n//    workingQry = updateStrForQry(workingQry, 'fsname', $('#txtFemaleSName').val());\n//    workingQry = updateStrForQry(workingQry, 'locat', $('#txtLocation').val());\n//    workingQry = updateStrForQry(workingQry, 'ldrl', $('#txtLowerDateRangeLower').val());\n//    workingQry = updateStrForQry(workingQry, 'ldru', $('#txtLowerDateRangeUpper').val());\n\n//    workingQry = updateStrForQry(workingQry, 'parid', parishId);\n\n//    //window.location.hash = workingQry;\n\n//    window.location.replace(workingQry);\n//}\n\n//string _parentId,\n//string christianName,\n//string surname,\n//string fatherChristianName,\n//string fatherSurname,\n//string motherChristianName,\n//string motherSurname,\n//string location,\n//string lowerDate,\n//string upperDate,\n//string filterTreeResults,\n//string filterIncludeBirths,\n//string filterIncludeDeaths,\n//string page_number,\n//string page_size);\n\n\n\n//function getMarriages(showdupes) {\n\n//    //BirthInt\n//    //_parentId\n//    var params = {};\n\n//    var page = getParameterByName('page');\n//    var sort_col = getParameterByName('sort_col');\n//    var parentId = '';\n\n//   \n\n//    if (!page || isNaN(page))\n//        page = 0;\n\n//    if (!sort_col || sort_col == '')\n//        sort_col = 'MarriageDate';\n\n//    if (showdupes == '0') {\n//        updateQryPar('_parentId', parentId);\n//    }\n//    else {\n//        parentId = getParameterByName('_parentId', '');\n//    }\n\n//    var parishId = getParameterByName('parid', '');\n\n//    params[0] = parentId;\n//    params[1] = String($('#txtMaleCName').val());\n//    params[2] = String($('#txtMaleSName').val());\n//    params[3] = String($('#txtFemaleCName').val());\n//    params[4] = String($('#txtFemaleSName').val());\n//    params[5] = String($('#txtLocation').val());\n//    params[6] = String($('#txtLowerDateRangeLower').val());\n//    params[7] = String($('#txtLowerDateRangeUpper').val());\n//    params[8] = '';\n//    params[9] = parishId;\n//    params[10] = String(page);\n//    params[11] = '30';\n//    params[12] = sort_col;\n\n\n//    twaGetJSON('/Marriages/GetMarriages/Select', params, marriageResult);\n\n\n//    createQryString(page);\n\n//    return false;\n//}\n\n\n\n\n\n\n//function marriageResult(data) {\n//    //alert('received something');\n//    var tableBody = '';\n//    var visibleRecords = new Array();\n\n//    \n\n\n//    $.each(data.serviceMarriages, function (source, sourceInfo) {\n//        //<a href='' class=\"button\" ><span>Main</span></a>\n//        var hidPID = '<input type=\"hidden\" name=\"MarriageId\" id=\"MarriageId\" value =\"' + sourceInfo.MarriageId + '\"/>';\n//        var hidParID = '<input type=\"hidden\" name=\"parent_id\" id=\"parent_id\" value =\"' + sourceInfo.XREF + '\"/>';\n\n//        var arIdx = jQuery.inArray(sourceInfo.MarriageId, selection);\n\n//        if (arIdx >= 0) {\n//            tableBody += '<tr class = \"highLightRow\">' + hidPID + hidParID;\n//        }\n//        else {\n//            tableBody += '<tr>' + hidPID + hidParID;\n//        }\n\n//        var _loc = window.location.hash;\n//        _loc = updateStrForQry(_loc, 'id', sourceInfo.MarriageId);\n\n//        // _loc = _loc.replace('#', '');\n\n//        tableBody += '<td><a href=\"\" onClick =\"loadDupes(\\'' + sourceInfo.XREF + '\\');return false\"><div>' + sourceInfo.Events + '</div></a></td>';\n\n\n\n//        tableBody += '<td><a href=\"\" onClick =\"processSelect(\\'' + sourceInfo.MarriageId + '\\');return false\"><div>' + sourceInfo.MarriageDate + '</div></a></td>';\n\n//        //~/HtmlPages/MarriageEditor.html#?_parentId=&active=1&mcname=test&msname=&fcname=&fsname=&locat=&ldrl=1700&ldru=1799&parid=&id=dafb85fe-cbfb-4d77-adb2-1caae78a9066\">Marriage Editor</asp:HyperLink>\n\n//        tableBody += '<td><a href=\"../HtmlPages/MarriageEditor.html' + _loc + '\"><div> Edit </div></a></td>';\n\n//        //tableBody += '<td><a href=\"../Forms/FrmEditorMarriages.aspx' + _loc + '\"><div> Edit </div></a></td>';\n\n//        tableBody += '<td><div>' + sourceInfo.MaleCName + '</div></td>';\n//        tableBody += '<td><div>' + sourceInfo.MaleSName + '</div></td>';\n//        tableBody += '<td><div>' + sourceInfo.FemaleCName + '</div></td>';\n//        tableBody += '<td><div>' + sourceInfo.FemaleSName + '</div></td>';\n//        tableBody += '<td><div>' + sourceInfo.MarriageLocation + '</div></td>';\n//        tableBody += '<td><div>' + sourceInfo.Witnesses + '</div></td>';\n//        tableBody += '</tr>';\n\n//        visibleRecords.push(sourceInfo.MarriageId);\n//    });\n\n\n\n\n\n//    if (selection != undefined) {\n//       selection = selection.RemoveInvalid(visibleRecords);\n//    }\n\n//    if (tableBody != '') {\n\n//        $('#search_bdy').html(tableBody);\n//        //create pager based on results\n\n//        $('#pager').html(createpager(data.Batch, data.BatchLength, data.Total, 'getLink'));\n\n//        $('#reccount').html(data.Total + ' Marriages');\n//    }\n//    else {\n\n//        $('#search_bdy').html(tableBody);\n//        $('#reccount').html('0 Marriages');\n//    }\n\n\n\n\n\n//}\n\n\n//function loadDupes(id) {\n//    updateQryPar('_parentId', id);\n//    getMarriages('1');\n//}\n\n//function processSelect(evt) {\n\n//    var arIdx = jQuery.inArray(evt, selection);\n\n//    if (arIdx == -1) {\n//        selection.push(evt);\n//    }\n//    else {\n//        selection.splice(arIdx, 1);\n//    }\n\n//    $('#search_bdy tr').each(function () {\n//        $this = $(this)\n\n//        var quantity = $this.find(\"#MarriageId\").val();\n//        arIdx = jQuery.inArray(quantity, selection);\n\n//        if (arIdx == -1) {\n//            $this.removeClass('highLightRow');\n//        }\n//        else {\n//            $this.addClass('highLightRow');\n//        }\n//    }); //end each\n\n//}\n\n\n\n//function getLink(toPage) {\n\n//    updateQryPar('page', toPage);\n//    getMarriages('1');\n\n//}\n\n\n//function sort(sort_col) {\n\n\n//    sort_inner(sort_col);\n//    getMarriages('1');\n//}\n\n\n\n\n\n//function DeleteRecord() {\n\n//    var theData = {};\n\n//    theData.marriageIds = convertToCSV(selection);\n\n//    twaPostJSON('/Marriages/Delete', theData, '', '', function (args) {\n//        getMarriages('1');\n//    });\n//}\n\n\n//function SetDuplicates() {\n\n\n//    var theData = {};\n\n//    theData.marriages = convertToCSV(selection);\n\n//    twaPostJSON('/Marriages/SetDuplicate', theData, '', '', function (args) {\n//        getMarriages('1');\n//    });\n\n//}\n\n\n//function SetRemoveLink() {\n//    //var localurl = getHost() + '/Marriages/RemoveLinks';\n//    var theData = {};\n\n//    theData.marriage = convertToCSV(selection);\n\n//    twaPostJSON('/Marriages/RemoveLinks', theData, '', '', function (args) {\n//        getMarriages('1');\n//    });\n\n//}\n\n//function SetMergeMarriages() {\n\n//   // var localurl = getHost() + '/Marriages/MergeMarriages';\n//    var theData = {};\n\n//    theData.marriage = convertToCSV(selection);\n\n//    twaPostJSON('/Marriages/MergeMarriages', theData, '', '', function (args) {\n//        getMarriages('1');\n//    });\n\n//}\n\n//function addMarriage(path) {\n// \n//    window.location.href = '../HtmlPages/MarriageEditor.html#' + makeIdQryString('id', path);\n// \n//}\n "]],"start1":0,"start2":0,"length1":0,"length2":17857}]],"length":17857}
{"contributors":[],"silentsave":false,"ts":1354536449369,"patch":[[{"diffs":[[-1,"ï»¿\n//var url = getHost() + \"/Marriages/GetMarriages/Select\";\n\n\n//var selection = new Array();\n//var parishId = ''"],[1,"var JSMaster, QryStrUtils, AncUtils,Panels"],[0,";\n\n"],[1," "],[0,"\n\n\n$"]],"start1":0,"start2":0,"length1":119,"length2":50},{"diffs":[[0,"ction = "],[-1,"new Array()"],[1,"[]"],[0,";\n    th"]],"start1":377,"start2":377,"length1":27,"length2":18},{"diffs":[[0,"leRecords = "],[-1,"new Array()"],[1,"[]"],[0,";\n\n        v"]],"start1":5082,"start2":5082,"length1":35,"length2":26},{"diffs":[[0,"vents = "],[-1,"new Array()"],[1,"[]"],[0,";\n      "]],"start1":5116,"start2":5116,"length1":27,"length2":18},{"diffs":[[0,"vents = "],[-1,"new Array()"],[1,"[]"],[0,";\n\n     "]],"start1":5147,"start2":5147,"length1":27,"length2":18},{"diffs":[[0,"his.selection !="],[-1,""],[0,""],[1,"="],[0," undefined) {\n  "]],"start1":7060,"start2":7060,"length1":32,"length2":33},{"diffs":[[0,"if (tableBody !="],[-1,""],[0,""],[1,"="],[0," '') {\n\n        "]],"start1":7185,"start2":7185,"length1":32,"length2":33},{"diffs":[[0,"}\n\n\n"],[-1,"\n \n//function imready() {\n\n//    var isActive = getParameterByName('active', '');\n\n//    if (isActive == '1') {\n//        $('#txtMaleCName').val(getParameterByName('mcname', ''));\n//        $('#txtMaleSName').val(getParameterByName('msname', ''));\n//        $('#txtFemaleCName').val(getParameterByName('fcname', ''));\n//        $('#txtFemaleSName').val(getParameterByName('fsname', ''));\n//        $('#txtLocation').val(getParameterByName('locat', ''));\n\n//        $('#txtLowerDateRangeLower').val(getParameterByName('ldrl', ''));\n//        $('#txtLowerDateRangeUpper').val(getParameterByName('ldru', ''));\n\n//        parishId = getParameterByName('parid', '');\n\n//        getMarriages('1');\n//    }\n//}\n\n\n//function createQryString(page) {\n\n\n\n//    updateQryPar('active', '1');\n\n//    var workingQry = window.location.hash;\n\n//    workingQry = updateStrForQry(workingQry, 'mcname', $('#txtMaleCName').val());\n//    workingQry = updateStrForQry(workingQry, 'msname', $('#txtMaleSName').val());\n//    workingQry = updateStrForQry(workingQry, 'fcname', $('#txtFemaleCName').val());\n//    workingQry = updateStrForQry(workingQry, 'fsname', $('#txtFemaleSName').val());\n//    workingQry = updateStrForQry(workingQry, 'locat', $('#txtLocation').val());\n//    workingQry = updateStrForQry(workingQry, 'ldrl', $('#txtLowerDateRangeLower').val());\n//    workingQry = updateStrForQry(workingQry, 'ldru', $('#txtLowerDateRangeUpper').val());\n\n//    workingQry = updateStrForQry(workingQry, 'parid', parishId);\n\n//    //window.location.hash = workingQry;\n\n//    window.location.replace(workingQry);\n//}\n\n//string _parentId,\n//string christianName,\n//string surname,\n//string fatherChristianName,\n//string fatherSurname,\n//string motherChristianName,\n//string motherSurname,\n//string location,\n//string lowerDate,\n//string upperDate,\n//string filterTreeResults,\n//string filterIncludeBirths,\n//string filterIncludeDeaths,\n//string page_number,\n//string page_size);\n\n\n\n//function getMarriages(showdupes) {\n\n//    //BirthInt\n//    //_parentId\n//    var params = {};\n\n//    var page = getParameterByName('page');\n//    var sort_col = getParameterByName('sort_col');\n//    var parentId = '';\n\n//   \n\n//    if (!page || isNaN(page))\n//        page = 0;\n\n//    if (!sort_col || sort_col == '')\n//        sort_col = 'MarriageDate';\n\n//    if (showdupes == '0') {\n//        updateQryPar('_parentId', parentId);\n//    }\n//    else {\n//        parentId = getParameterByName('_parentId', '');\n//    }\n\n//    var parishId = getParameterByName('parid', '');\n\n//    params[0] = parentId;\n//    params[1] = String($('#txtMaleCName').val());\n//    params[2] = String($('#txtMaleSName').val());\n//    params[3] = String($('#txtFemaleCName').val());\n//    params[4] = String($('#txtFemaleSName').val());\n//    params[5] = String($('#txtLocation').val());\n//    params[6] = String($('#txtLowerDateRangeLower').val());\n//    params[7] = String($('#txtLowerDateRangeUpper').val());\n//    params[8] = '';\n//    params[9] = parishId;\n//    params[10] = String(page);\n//    params[11] = '30';\n//    params[12] = sort_col;\n\n\n//    twaGetJSON('/Marriages/GetMarriages/Select', params, marriageResult);\n\n\n//    createQryString(page);\n\n//    return false;\n//}\n\n\n\n\n\n\n//function marriageResult(data) {\n//    //alert('received something');\n//    var tableBody = '';\n//    var visibleRecords = new Array();\n\n//    \n\n\n//    $.each(data.serviceMarriages, function (source, sourceInfo) {\n//        //<a href='' class=\"button\" ><span>Main</span></a>\n//        var hidPID = '<input type=\"hidden\" name=\"MarriageId\" id=\"MarriageId\" value =\"' + sourceInfo.MarriageId + '\"/>';\n//        var hidParID = '<input type=\"hidden\" name=\"parent_id\" id=\"parent_id\" value =\"' + sourceInfo.XREF + '\"/>';\n\n//        var arIdx = jQuery.inArray(sourceInfo.MarriageId, selection);\n\n//        if (arIdx >= 0) {\n//            tableBody += '<tr class = \"highLightRow\">' + hidPID + hidParID;\n//        }\n//        else {\n//            tableBody += '<tr>' + hidPID + hidParID;\n//        }\n\n//        var _loc = window.location.hash;\n//        _loc = updateStrForQry(_loc, 'id', sourceInfo.MarriageId);\n\n//        // _loc = _loc.replace('#', '');\n\n//        tableBody += '<td><a href=\"\" onClick =\"loadDupes(\\'' + sourceInfo.XREF + '\\');return false\"><div>' + sourceInfo.Events + '</div></a></td>';\n\n\n\n//        tableBody += '<td><a href=\"\" onClick =\"processSelect(\\'' + sourceInfo.MarriageId + '\\');return false\"><div>' + sourceInfo.MarriageDate + '</div></a></td>';\n\n//        //~/HtmlPages/MarriageEditor.html#?_parentId=&active=1&mcname=test&msname=&fcname=&fsname=&locat=&ldrl=1700&ldru=1799&parid=&id=dafb85fe-cbfb-4d77-adb2-1caae78a9066\">Marriage Editor</asp:HyperLink>\n\n//        tableBody += '<td><a href=\"../HtmlPages/MarriageEditor.html' + _loc + '\"><div> Edit </div></a></td>';\n\n//        //tableBody += '<td><a href=\"../Forms/FrmEditorMarriages.aspx' + _loc + '\"><div> Edit </div></a></td>';\n\n//        tableBody += '<td><div>' + sourceInfo.MaleCName + '</div></td>';\n//        tableBody += '<td><div>' + sourceInfo.MaleSName + '</div></td>';\n//        tableBody += '<td><div>' + sourceInfo.FemaleCName + '</div></td>';\n//        tableBody += '<td><div>' + sourceInfo.FemaleSName + '</div></td>';\n//        tableBody += '<td><div>' + sourceInfo.MarriageLocation + '</div></td>';\n//        tableBody += '<td><div>' + sourceInfo.Witnesses + '</div></td>';\n//        tableBody += '</tr>';\n\n//        visibleRecords.push(sourceInfo.MarriageId);\n//    });\n\n\n\n\n\n//    if (selection != undefined) {\n//       selection = selection.RemoveInvalid(visibleRecords);\n//    }\n\n//    if (tableBody != '') {\n\n//        $('#search_bdy').html(tableBody);\n//        //create pager based on results\n\n//        $('#pager').html(createpager(data.Batch, data.BatchLength, data.Total, 'getLink'));\n\n//        $('#reccount').html(data.Total + ' Marriages');\n//    }\n//    else {\n\n//        $('#search_bdy').html(tableBody);\n//        $('#reccount').html('0 Marriages');\n//    }\n\n\n\n\n\n//}\n\n\n//function loadDupes(id) {\n//    updateQryPar('_parentId', id);\n//    getMarriages('1');\n//}\n\n//function processSelect(evt) {\n\n//    var arIdx = jQuery.inArray(evt, selection);\n\n//    if (arIdx == -1) {\n//        selection.push(evt);\n//    }\n//    else {\n//        selection.splice(arIdx, 1);\n//    }\n\n//    $('#search_bdy tr').each(function () {\n//        $this = $(this)\n\n//        var quantity = $this.find(\"#MarriageId\").val();\n//        arIdx = jQuery.inArray(quantity, selection);\n\n//        if (arIdx == -1) {\n//            $this.removeClass('highLightRow');\n//        }\n//        else {\n//            $this.addClass('highLightRow');\n//        }\n//    }); //end each\n\n//}\n\n\n\n//function getLink(toPage) {\n\n//    updateQryPar('page', toPage);\n//    getMarriages('1');\n\n//}\n\n\n//function sort(sort_col) {\n\n\n//    sort_inner(sort_col);\n//    getMarriages('1');\n//}\n\n\n\n\n\n//function DeleteRecord() {\n\n//    var theData = {};\n\n//    theData.marriageIds = convertToCSV(selection);\n\n//    twaPostJSON('/Marriages/Delete', theData, '', '', function (args) {\n//        getMarriages('1');\n//    });\n//}\n\n\n//function SetDuplicates() {\n\n\n//    var theData = {};\n\n//    theData.marriages = convertToCSV(selection);\n\n//    twaPostJSON('/Marriages/SetDuplicate', theData, '', '', function (args) {\n//        getMarriages('1');\n//    });\n\n//}\n\n\n//function SetRemoveLink() {\n//    //var localurl = getHost() + '/Marriages/RemoveLinks';\n//    var theData = {};\n\n//    theData.marriage = convertToCSV(selection);\n\n//    twaPostJSON('/Marriages/RemoveLinks', theData, '', '', function (args) {\n//        getMarriages('1');\n//    });\n\n//}\n\n//function SetMergeMarriages() {\n\n//   // var localurl = getHost() + '/Marriages/MergeMarriages';\n//    var theData = {};\n\n//    theData.marriage = convertToCSV(selection);\n\n//    twaPostJSON('/Marriages/MergeMarriages', theData, '', '', function (args) {\n//        getMarriages('1');\n//    });\n\n//}\n\n//function addMarriage(path) {\n// \n//    window.location.href = '../HtmlPages/MarriageEditor.html#' + makeIdQryString('id', path);\n// \n//}\n "]],"start1":9684,"start2":9684,"length1":8070,"length2":4}]],"length":9688,"saved":false}
{"ts":1354536481558,"patch":[[{"diffs":[[0,"  };\n \n}"],[1,";"],[0,"\n\nAncMar"]],"start1":595,"start2":595,"length1":16,"length2":17},{"diffs":[[0,"\n    }\n}"],[1,";"],[0,"\n\n\n"]],"start1":9678,"start2":9678,"length1":11,"length2":12}]],"length":9690,"saved":false}
