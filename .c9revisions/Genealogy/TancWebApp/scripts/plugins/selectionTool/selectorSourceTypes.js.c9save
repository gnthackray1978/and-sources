{"ts":1354536192986,"silentsave":true,"restoring":false,"patch":[[{"diffs":[[1,"ï»¿\n\n\n\nvar AncSelectorSourceTypes = function () {\n    this.qryStrUtils = new QryStrUtils();\n    this.ancUtils = new AncUtils();\n    this.ancSelectorBase = new AncSelectorBase()\n\n    this.url = \"/SourceTypes/Select\"; // getHost() + \n \n    this.ancSelectorBase.context_data = {\n        editorUrl: '../HtmlPages/SourceTypeEditor.html',\n        param_name: 'stypes',\n        selectionUrl: '/SourceTypes/GetNames',\n        pagerfunction: this.getSourceTypeLink,   // this.pagerfunction = 'getLink';\n        search_body: 'st_search_bdy',\n        search_hed: 'st_search_hed',\n        pager: 's_pager',\n        sourceRefId: 'txtSourceTypeRef',\n        title: 'SOURCE TYPES',\n        refreshMethod: this.getSourceTypes,\n        parentContext: this\n    };\n\n}\n\nAncSelectorSourceTypes.prototype = {\n\n    getSourceTypes: function (selectorid) {\n        var params = {};\n\n        if (selectorid != undefined) {\n            this.ancSelectorBase.createOutline(selectorid)\n        }\n        var sourceTypeDesc = $('#' + this.ancSelectorBase.context_data.sourceRefId).val();\n\n        if (sourceTypeDesc == '') sourceTypeDesc = '%';\n\n        params[0] = sourceTypeDesc\n        params[1] = this.qryStrUtils.getParameterByName('st_page', 0);\n        params[2] = '10';\n        params[3] = 'SourceTypeDesc';\n\n        $.ajaxSetup({ cache: false });\n\n\n        var success = function (data) {\n            var batch_data = {};\n\n            batch_data.Batch = data.Batch;\n            batch_data.BatchLength = data.BatchLength;\n            batch_data.Total = data.Total;\n            batch_data.rows = new Array();\n\n            $.each(data.serviceSources, function (source, sourceInfo) {\n                var row0 = { id: sourceInfo.TypeId, ref: sourceInfo.Description };\n                batch_data.rows.push(row0);\n            });\n\n            this.ancSelectorBase.createBody(batch_data);\n        };\n\n\n        this.ancUtils.twaGetJSON(this.url, params, $.proxy(success, this));\n        return false;\n    },\n\n    getSourceTypeLink: function (toPage) {\n\n        this.qryStrUtils.updateQryPar('st_page', toPage);\n        this.getSourceTypes();\n\n    }\n}\n  \n//function getSourceTypes(selectorid) {\n\n//    var rows = new Array();\n//    var param_name = 'stypes';\n\n//    var selectionUrl = '/SourceTypes/GetNames';\n//    var editorUrl = '../HtmlPages/SourceTypeEditor.html';\n//    var sourceRefId = 'txtSourceTypeRef';\n//    var url = \"/SourceTypes/Select\";\n//    var pagerfunction = 'getSourceTypeLink';\n//    var getfunction = 'getSourceTypes';\n//    var search_hed = 'st_search_hed';\n//    var search_body = 'st_search_bdy';\n//    var pager = 'pager';\n\n\n//    var params = {};\n\n//    var page = getParameterByName('st_page');\n//    if (!page || isNaN(page))\n//        page = 0;\n\n\n//    if (selectorid != undefined) {\n\n//        var body = createOutline(getfunction,search_hed, search_body, sourceRefId, \"SOURCE TYPES\", pager);\n\n//        $(selectorid).html(body);\n//    }\n\n//    var sourceTypeDesc = $('#' + sourceRefId).val();\n\n//    if (sourceTypeDesc == '') sourceTypeDesc = '%';\n\n//    params[0] = sourceTypeDesc\n//    params[1] = String(page);\n//    params[2] = '10';\n//    params[3] = 'SourceTypeDesc';\n\n//    $.ajaxSetup({ cache: false });\n\n\n\n//    //$.getJSON(url, params, function (data) {\n//    \n//    twaGetJSON(url, params, function (data) {\n\n//        var batch_data = {};\n//        batch_data.Batch = data.Batch;\n//        batch_data.BatchLength = data.BatchLength;\n//        batch_data.Total = data.Total;\n\n//        $.each(data.serviceSources, function (source, sourceInfo) {\n//            var row0 = { id: sourceInfo.TypeId, ref: sourceInfo.Description };\n//            rows.push(row0);\n//        });\n\n//        createBody(rows, batch_data, editorUrl, param_name, selectionUrl, pagerfunction, search_body,search_hed, pager);\n//    });\n\n//    return false;\n//}\n\n"]],"start1":0,"start2":0,"length1":0,"length2":3842}]],"length":3842}
