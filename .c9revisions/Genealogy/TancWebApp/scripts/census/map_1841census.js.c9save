{"ts":1354640284750,"silentsave":true,"restoring":false,"patch":[[{"diffs":[[1,"﻿\n \n \n \nvar infoWindows = new Array();\n\n\nvar zoomLevel = 0;\nvar map = null;\n\n$(document).ready(function () {\n\n    localCreate('#1', initMap);\n});\n\n\n\nfunction localCreate(selectorid, readyfunction) {\n\n    facebookReady = readyfunction;\n\n    var headersection = '';\n\n    headersection += '<div id=\"fb-root\">';\n    headersection += '<fb:login-button autologoutlink=\"true\" &nbsp;perms=\"email,user_birthday,status_update,publish_stream\"></fb:login-button>';\n    headersection += '</div>';\n\n    $(selectorid).html(headersection);\n}\n\nfunction donothing() {\n\n\n}\n\n\n\n\n\nfunction initMap() {\n\n    var latLng = new google.maps.LatLng(53.957700, -1.082290);\n    var homeLatLng = new google.maps.LatLng(53.957700, -1.082290);\n\n\n\n\n    geocoder = new google.maps.Geocoder();\n    var mapDiv = document.getElementById('map_canvas');\n\n    map = new google.maps.Map(mapDiv, {\n        center: latLng,\n        zoom: 12\n            ,\n        mapTypeId: 'Border View',\n        draggableCursor: 'pointer',\n        draggingCursor: 'pointer',\n\n        mapTypeControlOptions: { mapTypeIds: ['Border View'] },\n\n        zoomControl: true,\n        zoomControlOptions: {\n            style: google.maps.ZoomControlStyle.LARGE,\n            position: google.maps.ControlPosition.TOP_RIGHT\n        },\n\n        panControl: true,\n        panControlOptions: {\n            position: google.maps.ControlPosition.TOP_RIGHT\n        }\n    });\n\n    setMapDetail();\n\n    var params = {};\n\n    twaGetJSON('/Sources/Get1841CensusPlaces', params, parishResults);\n};\n\n\nfunction parishResults(data) {\n\n    var tableBody = '';\n   \n    $.each(data, function (source, sourceInfo) {\n\n        var homeLatLng = new google.maps.LatLng(sourceInfo.LocX, sourceInfo.LocY);\n\n            var image = '../Images/icons/32x32/church_symbol2.png';\n            var marker = new google.maps.Marker({\n                position: homeLatLng,\n                map: map,\n                icon: image,\n                title: sourceInfo.PlaceName\n            });\n\n            marker.set(\"id\", sourceInfo.ParishId);\n      \n            google.maps.event.addListener(marker, 'click', function () {\n\n                createInfoWindowContent(sourceInfo.ParishId,   marker);\n\n            }); //end click\n\n    });    //end each\n\n\n}\n\n\n\n\n\nfunction createInfoWindowContent(parishId, marker) {\n\n    var params = {};\n    params[0] = parishId;\n \n    var infowindowloaded = 0;\n\n\n    twaGetJSON('/Sources/Get1841CensusSources', params, function (result) {\n\n \n            var headersection = '';\n            headersection += '<div id=\"' + result[0].SourceId + '\" class = \"info_cont\">';\n \n            headersection += '<div id=\"panelA\" class = \"displayPanel\">';\n            headersection += '<div class = \"census_inner\">';\n            headersection += generateDetail(result);\n            headersection += '</div>';\n            headersection += '</div>';\n\n            headersection += '</div>'; //end container\n\n            var infowindow = new google.maps.InfoWindow({\n                content: headersection\n            });\n           \n            infowindow.open(map, marker);\n        });     \n\n    }\n\n\n\n\n    function generateDetail(data) {\n\n        var transTable = '';\n\n     //   transTable += '<span class = \"tab_title\">Deposited at </span><span>xyz</span>';\n        transTable += '<table class=\"tableone\" summary=\"\">';\n\n\n\n            transTable += '<thead>';\n                transTable += '<tr>';\n                transTable += '<th class=\"th_range\" scope=\"col\">' + data.length + ' Entries at ' + data[0].Civil_Parish + '</th> ';\n                transTable += '</tr>';\n            transTable += '</thead>';\n\n            transTable += '<tbody>';\n\n\n            transTable += '<tr><td colspan=\"1\">';\n            transTable += '<div class=\"census_innerb\">';\n\n\n            transTable += '<table class=\"tabletwo\">';\n\n            $.each(data, function (source, sourceInfo) {\n\n\n                transTable += '<tr>';\n                transTable += '<td class=\"census_entry\">' + sourceInfo.Address + '</td>';\n                transTable += '</tr>';\n\n\n                $.each(sourceInfo.attachedPersons, function (source_i, sourceInfo_i) {\n                    transTable += '<tr>';\n                    transTable += '<td class=\"td_dat_type\">' + sourceInfo_i.BirthYear + ' ' + sourceInfo_i.CName + ' ' + sourceInfo_i.SName + '</td>';\n                    transTable += '</tr>';\n                });\n\n            });\n\n            transTable += '</table>';\n\n\n\n            transTable += '</div>';\n            transTable += '</td></tr>';\n            transTable += '</tbody>';\n        transTable += '</table>';\n\n        return transTable;\n    }\n\n\n\nfunction setMapDetail() {\n\n    var styleOff = [{ visibility: 'off'}];\n    var styleOn = [{ visibility: 'on'}];\n    var stylez = [\n          { featureType: 'administrative',\n              elementType: 'labels',\n              stylers: styleOn\n          },\n            { featureType: 'transit.line',\n                elementType: 'geometry',\n                stylers: styleOff\n            },\n            { featureType: 'transit.station.airport',\n                elementType: 'geometry',\n                stylers: styleOff\n            },\n          { featureType: 'administrative.province',\n              stylers: styleOff\n          },\n          { featureType: 'administrative.locality',\n              stylers: styleOn\n          },\n          { featureType: 'administrative.neighborhood',\n              stylers: styleOn\n          },\n\n          { featureType: 'administrative.land_parcel',\n              stylers: styleOn\n          },\n\n          { featureType: 'poi',\n              stylers: styleOff\n          },\n\n          { featureType: 'landscape',\n              stylers: styleOn\n          },\n\n          { featureType: 'landscape.natural',\n              stylers: styleOn\n          },\n\n          { featureType: 'road',\n              stylers: styleOn\n          }\n          ];\n\n\n    var customMapType = new google.maps.StyledMapType(stylez,\n            { name: 'Border View' });\n\n    map.mapTypes.set('Border View', customMapType);\n\n\n\n\n\n}\n\n\n\n\n"]],"start1":0,"start2":0,"length1":0,"length2":6064}]],"length":6064}
{"contributors":[],"silentsave":false,"ts":1354643302147,"patch":[[{"diffs":[[-1,"﻿\n "],[1,"\nvar JSMaster, QryStrUtils, AncUtils;"],[0,"\n \n "]],"start1":0,"start2":0,"length1":7,"length2":41},{"diffs":[[0,";\n\n\n"],[-1,"\nfunction localCreate"],[1,"$(document).ready(function () {\n    var jsMaster = new JSMaster();\n\n\n    jsMaster.connectfacebook(function () {        \n        var censusMap = new CensusMap();\n        censusMap.init();\n\n    });\n\n});\n\nvar CensusMap = function () {\n    this.qryStrUtils = new QryStrUtils();\n    this.ancUtils = new AncUtils();\n\n    this.postParams = {\n\n        url: '',\n        data: '',\n        idparam: 'id',\n        refreshmethod: this.load,\n        refreshArgs: undefined,\n        Context: this\n    };\n};\n\n\nCensusMap.prototype ={\n    \n\n    init: function"],[0,"(sel"]],"start1":178,"start2":178,"length1":29,"length2":549},{"diffs":[[0," {\n\n    "],[1,"   "],[1," "],[0,"facebook"]],"start1":750,"start2":750,"length1":16,"length2":20},{"diffs":[[0,"nction;\n"],[-1,"\n"],[1,"    \n    "],[0,"    var "]],"start1":785,"start2":785,"length1":17,"length2":25},{"diffs":[[0,"ction = '';\n"],[1,"    "],[0,"\n"],[1,"    "],[0,"    headerse"]],"start1":818,"start2":818,"length1":25,"length2":33},{"diffs":[[0,"fb-root\">';\n"],[1,"    "],[0,"    headerse"]],"start1":870,"start2":870,"length1":24,"length2":28},{"diffs":[[0,"n-button>';\n"],[1,"    "],[0,"    headerse"]],"start1":1019,"start2":1019,"length1":24,"length2":28},{"diffs":[[0,"= '</div>';\n"],[-1,"\n"],[1,"    \n    "],[0,"    $(select"]],"start1":1054,"start2":1054,"length1":25,"length2":33},{"diffs":[[0,"ction);\n"],[-1,"}"],[1,"    }\n    \n}\n\n\n\n"],[0,"\n\nfuncti"]],"start1":1106,"start2":1106,"length1":17,"length2":32}]],"length":6669,"saved":false}
{"ts":1354643765934,"patch":[[{"diffs":[[0," null;\n\n"],[1,"//"],[0,"$(docume"]],"start1":103,"start2":103,"length1":16,"length2":18},{"diffs":[[0,"() {\n\n  "],[1,"//"],[0,"  localC"]],"start1":140,"start2":140,"length1":16,"length2":18},{"diffs":[[0,"itMap);\n"],[1,"//"],[0,"});\n\n\n$("]],"start1":172,"start2":172,"length1":16,"length2":18},{"diffs":[[0,"nction () {\n"],[1,"    \n"],[0,"    var jsMa"]],"start1":208,"start2":208,"length1":24,"length2":29},{"diffs":[[0,"ster();\n"],[-1,""],[0,""],[1,"    var censusMap = new CensusMap();"],[0,"\n\n    js"]],"start1":252,"start2":252,"length1":16,"length2":52},{"diffs":[[0,"   \n"],[-1,"        var censusMap = new CensusMap();"],[0,""],[1,""],[0,"\n   "]],"start1":345,"start2":345,"length1":48,"length2":8},{"diffs":[[0,");\n\n"],[-1,"    this.postParams = {\n\n        url: '',\n        data: '',\n        idparam: 'id',\n        refreshmethod: this.load,\n        refreshArgs: undefined,\n        Context: this\n    };\n};\n\n\nCensusMap.prototype ={\n    \n\n    init: function(selectorid, readyfunction) {\n\n        facebookReady = readyfunction;\n    \n    "],[0,"    "]],"start1":496,"start2":496,"length1":317,"length2":8},{"diffs":[[0,"n = '';\n"],[-1,"    \n    "],[1,"\n"],[0,"    head"]],"start1":520,"start2":520,"length1":25,"length2":17},{"diffs":[[0,"fb-root\">';\n"],[-1,"    "],[0,"    headerse"]],"start1":560,"start2":560,"length1":28,"length2":24},{"diffs":[[0,"n-button>';\n"],[-1,"    "],[0,"    headerse"]],"start1":705,"start2":705,"length1":28,"length2":24},{"diffs":[[0,">';\n"],[-1,"    \n        $(selectorid"],[1,"\n    $('#1'"],[0,").ht"]],"start1":744,"start2":744,"length1":33,"length2":19},{"diffs":[[0,"n);\n"],[1,"\n\n"],[0,"    "],[-1,"}\n    \n}\n\n\n\n\n\nfunction donothing() {\n\n"],[1,"this.postParams = {\n\n        url: '',\n        data: '',\n        idparam: 'id',\n        refreshmethod: this.load,\n        refreshArgs: undefined,\n        Context: this\n    };"],[0,"\n}"],[1,";"],[0,"\n\n\n"],[-1,"\n\n\nfunction initMap("],[1,"CensusMap.prototype ={\n    \n\n    init: function(selectorid, readyfunction"],[0,") {\n\n"],[1,"    "],[0,"    "]],"start1":778,"start2":778,"length1":80,"length2":275},{"diffs":[[0,"82290);\n"],[1,"    "],[0,"    var "]],"start1":1104,"start2":1104,"length1":16,"length2":20},{"diffs":[[0,"sults);\n"],[-1,"};"],[1,"    \n\n    }\n    \n}\n"],[0,"\n\n\nfunct"]],"start1":1977,"start2":1977,"length1":18,"length2":35}]],"length":6553,"saved":false}
