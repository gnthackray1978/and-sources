{"ts":1354550650246,"silentsave":true,"restoring":false,"patch":[[{"diffs":[[1,"﻿\n\n\n\n//$(document).ready(function () {\n\n//    //http://localhost:666/Forms/FrmEditorMarriages.aspx?_parentId=&active=1&mcname=test&msname=&fcname=&fsname=&locat=&ldrl=1700&ldru=1799&parid=&id=c2c2c673-b10b-42a3-8922-0c0bc1b29144\n\n\n//    createHeader('#1',getMarriage);\n//   // ();\n//});\n\n\n\n$(document).ready(function () {\n    var jsMaster = new JSMaster();\n\n\n    console.log('marriage editor ready');\n\n    jsMaster.generateHeader('#1', function () {\n        \n        var ancMarriageEditor = new AncMarriageEditor();\n        ancMarriageEditor.init();\n\n    });\n\n});\n\n\n\n\n\nvar AncMarriageEditor = function () {\n    this.qryStrUtils = new QryStrUtils();\n    this.ancUtils = new AncUtils();\n\n    this.postParams = {\n\n        url: '',\n        data: '',\n        idparam: 'id',\n        refreshmethod: this.load,\n        refreshArgs: undefined,\n        Context: this\n    };\n}\n\nAncMarriageEditor.prototype = {\n\n    init: function () {\n\n        console.log('marriage editor init');\n        $(\"#save\").live(\"click\", $.proxy(function () { this.save(); return false; }, this));\n\n        $(\"#return\").live(\"click\", $.proxy(function () { this.saveReturn(); return false; }, this));\n\n\n        this.load();\n\n        return false;\n\n    },\n\n    load: function () {\n        console.log('marriage editor load');\n        var params = {};\n        params[0] = this.qryStrUtils.getParameterByName('id', '');\n\n        this.ancUtils.twaGetJSON(\"/Marriages/GetMarriage/Select\", params, $.proxy(this.processData, this));\n    },\n\n\n    processData: function (data) {\n\n        console.log('marriage editor recieved data');\n\n        $('#txtMDate').val(data.MarriageDate);\n        $('#txtSource').val(data.SourceDescription);\n\n        $('#txtMaleName').val(data.MaleCName);\n        $('#txtMaleSurname').val(data.MaleSName);\n        $('#txtFemaleName').val(data.FemaleCName);\n        $('#txtFemaleSurname').val(data.FemaleSName);\n\n        $('#txtParish').val(data.MarriageLocation);\n        $('#txtCounty').val(data.LocationCounty);\n\n        $('#txtWit1c').val(data.Witness1ChristianName);\n        $('#txtWit1').val(data.Witness1Surname);\n\n        $('#txtWit2c').val(data.Witness2ChristianName);\n        $('#txtWit2').val(data.Witness2Surname);\n\n        $('#txtWit3c').val(data.Witness3ChristianName);\n        $('#txtWit3').val(data.Witness3Surname);\n\n        $('#txtWit4c').val(data.Witness4ChristianName);\n        $('#txtWit4').val(data.Witness4Surname);\n\n        $('#txtMaleLoc').val(data.MaleLocation);\n        $('#txtFemaleLoc').val(data.FemaleLocation);\n\n        $('#txtMBYr').val(data.MaleBirthYear);\n        $('#txtFBYr').val(data.FemaleBirthYear);\n\n        $('#txtMOcc').val(data.MaleOccupation);\n        $('#txtFOcc').val(data.FemaleOccupation);\n\n        $('#txtMNot').val(data.MaleNotes);\n\n        $('#txtFNot').val(data.FemaleNotes);\n\n        if (data.IsWidow == false) {\n            $('#chkIsWid').prop('checked', false);\n        }\n        else {\n            $('#chkIsWid').prop('checked', true);\n        }\n\n        if (data.IsWidower == false) {\n            $('#chkIsWiw').prop('checked', false);\n        }\n        else {\n            $('#chkIsWiw').prop('checked', true);\n        }\n\n\n        if (data.IsBanns == false) {\n            $('#chkIsBann').prop('checked', false);\n        }\n        else {\n            $('#chkIsBann').prop('checked', true);\n        }\n\n        if (data.IsLicense == false) {\n            $('#chkIsLic').prop('checked', false);\n        }\n        else {\n            $('#chkIsLic').prop('checked', true);\n        }\n\n\n        this.qryStrUtils.updateQryPar('source_ids', data.Sources);\n\n\n        //getSources('#sourceselector');\n\n        var ancSelectorSources = new AncSelectorSources();\n\n        ancSelectorSources.getSources('#sourceselector');\n        \n        console.log('marriage editor requested source data');\n    },\n\n    GetMarriageRecord: function (rowIdx) {\n        // theData.SourceDescription = $('#txtSource').val();\n        var record = {};\n        record.FemaleLocationId = '';\n        record.LocationId = '';\n        record.MaleLocationId = '';\n        record.SourceDescription = $('#txtSource').val();\n        record.Sources = getParameterByName('source_ids', '');\n        record.MarriageId = getParameterByName('id', '');\n        record.IsBanns = $('#chkIsBann').prop('checked');\n        record.IsLicense = $('#chkIsLic').prop('checked');\n        record.IsWidow = $('#chkIsWid').prop('checked');\n        record.IsWidower = $('#chkIsWiw').prop('checked');\n        record.FemaleBirthYear = $('#txtFBYr').val();\n        record.FemaleCName = $('#txtFemaleName').val();\n        record.FemaleLocation = $('#txtFemaleLoc').val();\n        record.FemaleNotes = $('#txtFNot').val();\n        record.FemaleOccupation = $('#txtFOcc').val();\n        record.FemaleSName = $('#txtFemaleSurname').val();\n        record.LocationCounty = $('#txtCounty').val();\n        record.MaleBirthYear = $('#txtMBYr').val();\n        record.MaleCName = $('#txtMaleName').val();\n        record.MaleLocation = $('#txtMaleLoc').val();\n        record.MaleNotes = $('#txtMNot').val();\n        record.MaleOccupation = $('#txtMOcc').val();\n        record.MaleSName = $('#txtMaleSurname').val();\n        record.MarriageDate = $('#txtMDate').val();\n        record.MarriageLocation = $('#txtParish').val();\n\n        record.Witness1ChristianName = $('#txtWit1c').val();\n        record.Witness1Surname = $('#txtWit1').val();\n        record.Witness2ChristianName = $('#txtWit2c').val();\n        record.Witness2Surname = $('#txtWit2').val();\n        record.Witness3ChristianName = $('#txtWit3c').val();\n        record.Witness3Surname = $('#txtWit3').val();\n        record.Witness4ChristianName = $('#txtWit4c').val();\n        record.Witness4Surname = $('#txtWit4').val();\n\n        return record;\n    },\n    save: function () {\n        this.postParams.url = '/Marriages/Add';\n        this.postParams.data = this.GetMarriageRecord();\n        this.ancUtils.twaPostJSON(this.postParams);\n    },\n\n    saveReturn: function () {\n        this.postParams.refreshmethod = function () { window.location = '../HtmlPages/MarriageSearch.html' + window.location.hash; };\n        this.postParams.url = '/Marriages/Add';\n        this.postParams.data = this.GetMarriageRecord();\n        this.ancUtils.twaPostJSON(this.postParams);\n    }\n\n    //    save: function () {\n    //        var serviceMarriage = this.GetMarriageRecord();\n    //        this.saveMarriage(serviceMarriage);\n    //    },\n\n    //    saveReturn: function () {\n    //        var serviceMarriage = this.GetMarriageRecord();\n    //        //  twaPostJSON('/Marriages/Add', serviceMarriage, '../HtmlPages/MarriageSearch.html', 'id');\n\n    //    },\n\n    //    saveMarriage: function (serviceMarriage) {\n    //        twaPostJSON('/Marriages/Add', serviceMarriage, '', 'id');\n    //    }\n\n\n}\n\n\n\n\n\n\n//save = function () {\n//    var serviceMarriage = GetMarriageRecord();\n\n//    saveMarriage(serviceMarriage);\n\n//}\n\n\n\n//saveReturn = function () {\n\n//    var serviceMarriage = GetMarriageRecord();\n//    twaPostJSON('/Marriages/Add', serviceMarriage, '../HtmlPages/MarriageSearch.html','id');\n//}\n\n\n\n//saveMarriage = function (serviceMarriage) {\n\n//    twaPostJSON('/Marriages/Add', serviceMarriage, '', 'id');\n//}\n\n\n//function getMarriage() {\n\n//    var params = {};\n\n//    var id = getParameterByName('id', '');\n\n//    params[0] = id;\n\n//    twaGetJSON(\"/Marriages/GetMarriage/Select\", params, processData);\n\n//    return false;\n//}\n\n\n//function processData(data) {\n\n\n\n//    $('#txtMDate').val(data.MarriageDate);\n//    $('#txtSource').val(data.SourceDescription);\n\n//    $('#txtMaleName').val(data.MaleCName);\n//    $('#txtMaleSurname').val(data.MaleSName);\n//    $('#txtFemaleName').val(data.FemaleCName);\n//    $('#txtFemaleSurname').val(data.FemaleSName);\n\n//    $('#txtParish').val(data.MarriageLocation);\n//    $('#txtCounty').val(data.LocationCounty);\n\n//    $('#txtWit1c').val(data.Witness1ChristianName);\n//    $('#txtWit1').val(data.Witness1Surname);\n\n//    $('#txtWit2c').val(data.Witness2ChristianName);\n//    $('#txtWit2').val(data.Witness2Surname);\n\n//    $('#txtWit3c').val(data.Witness3ChristianName);\n//    $('#txtWit3').val(data.Witness3Surname);\n\n//    $('#txtWit4c').val(data.Witness4ChristianName);\n//    $('#txtWit4').val(data.Witness4Surname);\n\n//    $('#txtMaleLoc').val(data.MaleLocation);\n//    $('#txtFemaleLoc').val(data.FemaleLocation);\n\n//    $('#txtMBYr').val(data.MaleBirthYear);\n//    $('#txtFBYr').val(data.FemaleBirthYear);\n\n//    $('#txtMOcc').val(data.MaleOccupation);\n//    $('#txtFOcc').val(data.FemaleOccupation);\n\n//    $('#txtMNot').val(data.MaleNotes);\n\n//    $('#txtFNot').val(data.FemaleNotes);\n\n//    if (data.IsWidow == false) {\n//        $('#chkIsWid').prop('checked', false);\n//    }\n//    else {\n//        $('#chkIsWid').prop('checked', true);\n//    }\n\n//    if (data.IsWidower == false) {\n//        $('#chkIsWiw').prop('checked', false);\n//    }\n//    else {\n//        $('#chkIsWiw').prop('checked', true);\n//    }\n\n\n//    if (data.IsBanns == false) {\n//        $('#chkIsBann').prop('checked', false);\n//    }\n//    else {\n//        $('#chkIsBann').prop('checked', true);\n//    }\n\n//    if (data.IsLicense == false) {\n//        $('#chkIsLic').prop('checked', false);\n//    }\n//    else {\n//        $('#chkIsLic').prop('checked', true);\n//    }\n\n\n//    updateQryPar('source_ids', data.Sources);\n\n\n//    getSources('#sourceselector');\n//}\n\n\n\n//GetMarriageRecord = function (rowIdx) {\n//    // theData.SourceDescription = $('#txtSource').val();\n//    var record = {};\n\n\n\n//    record.FemaleLocationId = '';\n//    record.LocationId = '';\n//    record.MaleLocationId = '';\n//    record.SourceDescription = $('#txtSource').val();\n//    record.Sources = getParameterByName('source_ids', '');\n//    record.MarriageId = getParameterByName('id', '');\n//    record.IsBanns = $('#chkIsBann').prop('checked');\n//    record.IsLicense = $('#chkIsLic').prop('checked');\n//    record.IsWidow = $('#chkIsWid').prop('checked');\n//    record.IsWidower = $('#chkIsWiw').prop('checked');\n//    record.FemaleBirthYear = $('#txtFBYr').val();\n//    record.FemaleCName = $('#txtFemaleName').val();\n//    record.FemaleLocation = $('#txtFemaleLoc').val();\n//    record.FemaleNotes = $('#txtFNot').val();\n//    record.FemaleOccupation = $('#txtFOcc').val();\n//    record.FemaleSName = $('#txtFemaleSurname').val();\n//    record.LocationCounty = $('#txtCounty').val();\n//    record.MaleBirthYear = $('#txtMBYr').val();\n//    record.MaleCName = $('#txtMaleName').val();\n//    record.MaleLocation = $('#txtMaleLoc').val();\n//    record.MaleNotes = $('#txtMNot').val();\n//    record.MaleOccupation = $('#txtMOcc').val();\n//    record.MaleSName = $('#txtMaleSurname').val();\n//    record.MarriageDate = $('#txtMDate').val();\n//    record.MarriageLocation = $('#txtParish').val();\n\n//    record.Witness1ChristianName = $('#txtWit1c').val();\n//    record.Witness1Surname = $('#txtWit1').val();\n//    record.Witness2ChristianName = $('#txtWit2c').val();\n//    record.Witness2Surname = $('#txtWit2').val();\n//    record.Witness3ChristianName = $('#txtWit3c').val();\n//    record.Witness3Surname = $('#txtWit3').val();\n//    record.Witness4ChristianName = $('#txtWit4c').val();\n//    record.Witness4Surname = $('#txtWit4').val();\n\n//    return record;\n\n\n//}"]],"start1":0,"start2":0,"length1":0,"length2":11283}]],"length":11283}
{"contributors":[],"silentsave":false,"ts":1354551014889,"patch":[[{"diffs":[[-1,"﻿\n\n\n\n//$(document).ready(function () {\n\n//    //http://localhost:666/Forms/FrmEditorMarriages.aspx?_parentId=&active=1&mcname=test&msname=&fcname=&fsname=&locat=&ldrl=1700&ldru=1799&parid=&id=c2c2c673-b10b-42a3-8922-0c0bc1b29144\n\n\n//    createHeader('#1',getMarriage);\n//   // ();\n//});\n\n"],[1,"\nvar JSMaster, QryStrUtils, AncUtils,Panels,AncSelectorSources;\n\n "],[0,"\n\n$("]],"start1":0,"start2":0,"length1":292,"length2":70},{"diffs":[[0,"    };\n}"],[-1,""],[0,""],[1,";"],[0,"\n\nAncMar"]],"start1":635,"start2":635,"length1":16,"length2":17},{"diffs":[[0,"(data.IsWidow =="],[-1,""],[0,""],[1,"="],[0," false) {\n      "]],"start1":2600,"start2":2600,"length1":32,"length2":33},{"diffs":[[0,"ata.IsWidower =="],[-1,""],[0,""],[1,"="],[0," false) {\n      "]],"start1":2777,"start2":2777,"length1":32,"length2":33},{"diffs":[[0,"(data.IsBanns =="],[-1,""],[0,""],[1,"="],[0," false) {\n      "]],"start1":2953,"start2":2953,"length1":32,"length2":33},{"diffs":[[0,"ata.IsLicense =="],[-1,""],[0,""],[1,"="],[0," false) {\n      "]],"start1":3132,"start2":3132,"length1":32,"length2":33},{"diffs":[[0,"ecord.Sources = "],[1,"this.qryStrUtils."],[0,"getParameterByNa"]],"start1":3908,"start2":3908,"length1":32,"length2":49},{"diffs":[[0,"rd.MarriageId = "],[1,"this.qryStrUtils."],[0,"getParameterByNa"]],"start1":3991,"start2":3991,"length1":32,"length2":49},{"diffs":[[0," }\n\n"],[-1,"    //    save: function () {\n    //        var serviceMarriage = this.GetMarriageRecord();\n    //        this.saveMarriage(serviceMarriage);\n    //    },\n\n    //    saveReturn: function () {\n    //        var serviceMarriage = this.GetMarriageRecord();\n    //        //  twaPostJSON('/Marriages/Add', serviceMarriage, '../HtmlPages/MarriageSearch.html', 'id');\n\n    //    },\n\n    //    saveMarriage: function (serviceMarriage) {\n    //        twaPostJSON('/Marriages/Add', serviceMarriage, '', 'id');\n    //    }\n\n\n}\n\n\n\n\n\n\n//save = function () {\n//    var serviceMarriage = GetMarriageRecord();\n\n//    saveMarriage(serviceMarriage);\n\n//}\n\n\n\n//saveReturn = function () {\n\n//    var serviceMarriage = GetMarriageRecord();\n//    twaPostJSON('/Marriages/Add', serviceMarriage, '../HtmlPages/MarriageSearch.html','id');\n//}\n\n\n\n//saveMarriage = function (serviceMarriage) {\n\n//    twaPostJSON('/Marriages/Add', serviceMarriage, '', 'id');\n//}\n\n\n//function getMarriage() {\n\n//    var params = {};\n\n//    var id = getParameterByName('id', '');\n\n//    params[0] = id;\n\n//    twaGetJSON(\"/Marriages/GetMarriage/Select\", params, processData);\n\n//    return false;\n//}\n\n\n//function processData(data) {\n\n\n\n//    $('#txtMDate').val(data.MarriageDate);\n//    $('#txtSource').val(data.SourceDescription);\n\n//    $('#txtMaleName').val(data.MaleCName);\n//    $('#txtMaleSurname').val(data.MaleSName);\n//    $('#txtFemaleName').val(data.FemaleCName);\n//    $('#txtFemaleSurname').val(data.FemaleSName);\n\n//    $('#txtParish').val(data.MarriageLocation);\n//    $('#txtCounty').val(data.LocationCounty);\n\n//    $('#txtWit1c').val(data.Witness1ChristianName);\n//    $('#txtWit1').val(data.Witness1Surname);\n\n//    $('#txtWit2c').val(data.Witness2ChristianName);\n//    $('#txtWit2').val(data.Witness2Surname);\n\n//    $('#txtWit3c').val(data.Witness3ChristianName);\n//    $('#txtWit3').val(data.Witness3Surname);\n\n//    $('#txtWit4c').val(data.Witness4ChristianName);\n//    $('#txtWit4').val(data.Witness4Surname);\n\n//    $('#txtMaleLoc').val(data.MaleLocation);\n//    $('#txtFemaleLoc').val(data.FemaleLocation);\n\n//    $('#txtMBYr').val(data.MaleBirthYear);\n//    $('#txtFBYr').val(data.FemaleBirthYear);\n\n//    $('#txtMOcc').val(data.MaleOccupation);\n//    $('#txtFOcc').val(data.FemaleOccupation);\n\n//    $('#txtMNot').val(data.MaleNotes);\n\n//    $('#txtFNot').val(data.FemaleNotes);\n\n//    if (data.IsWidow == false) {\n//        $('#chkIsWid').prop('checked', false);\n//    }\n//    else {\n//        $('#chkIsWid').prop('checked', true);\n//    }\n\n//    if (data.IsWidower == false) {\n//        $('#chkIsWiw').prop('checked', false);\n//    }\n//    else {\n//        $('#chkIsWiw').prop('checked', true);\n//    }\n\n\n//    if (data.IsBanns == false) {\n//        $('#chkIsBann').prop('checked', false);\n//    }\n//    else {\n//        $('#chkIsBann').prop('checked', true);\n//    }\n\n//    if (data.IsLicense == false) {\n//        $('#chkIsLic').prop('checked', false);\n//    }\n//    else {\n//        $('#chkIsLic').prop('checked', true);\n//    }\n\n\n//    updateQryPar('source_ids', data.Sources);\n\n\n//    getSources('#sourceselector');\n//}\n\n\n\n//GetMarriageRecord = function (rowIdx) {\n//    // theData.SourceDescription = $('#txtSource').val();\n//    var record = {};\n\n\n\n//    record.FemaleLocationId = '';\n//    record.LocationId = '';\n//    record.MaleLocationId = '';\n//    record.SourceDescription = $('#txtSource').val();\n//    record.Sources = getParameterByName('source_ids', '');\n//    record.MarriageId = getParameterByName('id', '');\n//    record.IsBanns = $('#chkIsBann').prop('checked');\n//    record.IsLicense = $('#chkIsLic').prop('checked');\n//    record.IsWidow = $('#chkIsWid').prop('checked');\n//    record.IsWidower = $('#chkIsWiw').prop('checked');\n//    record.FemaleBirthYear = $('#txtFBYr').val();\n//    record.FemaleCName = $('#txtFemaleName').val();\n//    record.FemaleLocation = $('#txtFemaleLoc').val();\n//    record.FemaleNotes = $('#txtFNot').val();\n//    record.FemaleOccupation = $('#txtFOcc').val();\n//    record.FemaleSName = $('#txtFemaleSurname').val();\n//    record.LocationCounty = $('#txtCounty').val();\n//    record.MaleBirthYear = $('#txtMBYr').val();\n//    record.MaleCName = $('#txtMaleName').val();\n//    record.MaleLocation = $('#txtMaleLoc').val();\n//    record.MaleNotes = $('#txtMNot').val();\n//    record.MaleOccupation = $('#txtMOcc').val();\n//    record.MaleSName = $('#txtMaleSurname').val();\n//    record.MarriageDate = $('#txtMDate').val();\n//    record.MarriageLocation = $('#txtParish').val();\n\n//    record.Witness1ChristianName = $('#txtWit1c').val();\n//    record.Witness1Surname = $('#txtWit1').val();\n//    record.Witness2ChristianName = $('#txtWit2c').val();\n//    record.Witness2Surname = $('#txtWit2').val();\n//    record.Witness3ChristianName = $('#txtWit3c').val();\n//    record.Witness3Surname = $('#txtWit3').val();\n//    record.Witness4ChristianName = $('#txtWit4c').val();\n//    record.Witness4Surname = $('#txtWit4').val();\n\n//    return record;\n\n\n//}"],[1,"};\n"]],"start1":6102,"start2":6102,"length1":4998,"length2":7}]],"length":6109,"saved":false}
{"ts":1354551036779,"patch":[[{"diffs":[[0,"ils,"],[-1,"Panels,"],[0,"AncS"]],"start1":33,"start2":33,"length1":15,"length2":8}]],"length":6102,"saved":false}
