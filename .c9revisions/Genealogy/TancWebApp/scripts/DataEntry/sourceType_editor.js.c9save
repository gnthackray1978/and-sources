{"ts":1354635104736,"silentsave":true,"restoring":false,"patch":[[{"diffs":[[1,"﻿\n\n//ok\n\n$(document).ready(function () {\n\n\n\n    createHeader('#1',getSourceType);\n  \n});\n\n//ok\nsave = function () {\n   // var sourceType = getSourceType();\n\n    saveSourceType();\n\n}\n\n\n//ok\nsaveReturn = function () {\n\n    twaPostJSON('/SourceTypes/Add', GetSourceTypeRecord(), '../HtmlPages/SourceTypesSearch.html', 'id');\n\n    //    var localurl = getHost() + '/SourceTypes/Add';\n    //    var stringy = JSON.stringify(GetSourceTypeRecord());\n\n    //    $.ajax({\n    //        cache: false,\n    //        type: \"POST\",\n    //        async: false,\n    //        url: localurl,\n    //        data: stringy,\n    //        contentType: \"application/json\",\n    //        dataType: \"json\",\n    //        success: function (message) {\n\n    //            var result = getValueFromKey(message, 'Id');\n\n    //            updateQryPar('id', result);\n\n    //            var error = getValueFromKey(message, 'error');\n\n    //            if (error != '' && error != null) {\n    //                showError(error);\n    //            }\n    //            else {\n    //                var _hash = window.location.hash;\n    //                window.location = '../HtmlPages/SourceTypesSearch.html' + _hash;\n    //            }\n    //        }\n    //    });\n}\n\n\n\nsaveSourceType = function () {\n\n    twaPostJSON('/SourceTypes/Add', GetSourceTypeRecord(), '', 'id');\n\n//    var localurl = getHost() + '/SourceTypes/Add';\n\n\n\n//    var stringy = JSON.stringify(GetSourceTypeRecord());\n\n//    $.ajax({\n//        cache: false,\n//        type: \"POST\",\n//        async: false,\n//        url: localurl,\n//        data: stringy,\n//        contentType: \"application/json\",\n//        dataType: \"json\",\n//        success: function (message) {\n\n//            var result = getValueFromKey(message, 'Id');\n\n//            updateQryPar('id', result);\n\n//            var error = getValueFromKey(message, 'error');\n\n//            if (error != '' && error != null) {\n//                showError(error);\n//            }\n\n\n//        }\n\n//    });\n\n}\n\n//ok\nfunction getSourceType() {\n\n    var params = {};\n\n //   var url = getHost() + \"/SourceTypes/Id\";\n\n    var id = getParameterByName('id', '');\n\n    params[0] = id;\n\n//    $.ajaxSetup({ cache: false });\n//    $.getJSON(url, params, processData);\n\n    twaGetJSON(\"/SourceTypes/Id\", params, processData);\n\n    return false;\n}\n\n\n\nfunction processData(data) {\n\n    // public string AddPerson(string personId, string birthparishId,string deathparishId, string referenceparishId, string ismale, string years, string months, string weeks, string days)\n\n    $('#txtOrder').val(data.Order);\n    $('#txtDescription').val(data.Description);\n  \n}\n\n\n\nGetSourceTypeRecord = function (rowIdx) {\n    var data = {};\n\n    data.TypeId = getParameterByName('id', '');\n    data.Description = $('#txtDescription').val();\n    data.Order = $('#txtOrder').val();\n\n\n\n    return data;\n}"]],"start1":0,"start2":0,"length1":0,"length2":2868}]],"length":2868}
{"contributors":[],"silentsave":false,"ts":1354635513503,"patch":[[{"diffs":[[-1,"﻿"],[1,"var JSMaster, QryStrUtils, AncUtils;\n\n$(document).ready(function () {\n    var jsMaster = new JSMaster();\n \n    jsMaster.generateHeader('#1', function () {        \n        var ancSourceTypeEditor = new AncSourceTypeEditor();\n        ancSourceTypeEditor.init();\n\n    });\n\n});\n\n\n\nvar AncSourceTypeEditor = function () {\n    this.qryStrUtils = new QryStrUtils();\n    this.ancUtils = new AncUtils();\n\n    this.postParams = {\n        url: '',\n        data: '',\n        idparam: 'id',\n        refreshmethod: this.load,\n        refreshArgs: undefined,\n        Context: this\n    };\n};\n\n\nAncSourceTypeEditor.prototype = {\n\n    init: function () {                \n        $(\"#save\").live(\"click\", $.proxy(function () { this.save(); return false; }, this));\n        $(\"#return\").live(\"click\", $.proxy(function () { this.saveReturn(); return false; }, this));\n        this.load();\n        return false;\n    },\n\n    load: function () {      \n        var params = {};\n        params[0] = this.qryStrUtils.getParameterByName('id', '');\n\n        this.ancUtils.twaGetJSON(\"/SourceTypes/Id\", params, $.proxy(this.processData, this));\n    },\n    processData: function (data) {\n        $('#txtOrder').val(data.Order);\n        $('#txtDescription').val(data.Description);\n    },\n\n    GetMarriageRecord: function (rowIdx) {\n        // theData.SourceDescription = $('#txtSource').val();\n        var record = {};\n        record.FemaleLocationId = '';\n        record.LocationId = '';\n        record.MaleLocationId = '';\n        record.SourceDescription = $('#txtSource').val();\n        record.Sources = this.qryStrUtils.getParameterByName('source_ids', '');\n        record.MarriageId = this.qryStrUtils.getParameterByName('id', '');\n        record.IsBanns = $('#chkIsBann').prop('checked');\n        record.IsLicense = $('#chkIsLic').prop('checked');\n        record.IsWidow = $('#chkIsWid').prop('checked');\n        record.IsWidower = $('#chkIsWiw').prop('checked');\n        record.FemaleBirthYear = $('#txtFBYr').val();\n        record.FemaleCName = $('#txtFemaleName').val();\n        record.FemaleLocation = $('#txtFemaleLoc').val();\n        record.FemaleNotes = $('#txtFNot').val();\n        record.FemaleOccupation = $('#txtFOcc').val();\n        record.FemaleSName = $('#txtFemaleSurname').val();\n        record.LocationCounty = $('#txtCounty').val();\n        record.MaleBirthYear = $('#txtMBYr').val();\n        record.MaleCName = $('#txtMaleName').val();\n        record.MaleLocation = $('#txtMaleLoc').val();\n        record.MaleNotes = $('#txtMNot').val();\n        record.MaleOccupation = $('#txtMOcc').val();\n        record.MaleSName = $('#txtMaleSurname').val();\n        record.MarriageDate = $('#txtMDate').val();\n        record.MarriageLocation = $('#txtParish').val();\n\n        record.Witness1ChristianName = $('#txtWit1c').val();\n        record.Witness1Surname = $('#txtWit1').val();\n        record.Witness2ChristianName = $('#txtWit2c').val();\n        record.Witness2Surname = $('#txtWit2').val();\n        record.Witness3ChristianName = $('#txtWit3c').val();\n        record.Witness3Surname = $('#txtWit3').val();\n        record.Witness4ChristianName = $('#txtWit4c').val();\n        record.Witness4Surname = $('#txtWit4').val();\n\n        return record;\n    },\n    save: function () {\n        this.postParams.url = '/Marriages/Add';\n        this.postParams.data = this.GetMarriageRecord();\n        this.ancUtils.twaPostJSON(this.postParams);\n    },\n\n    saveReturn: function () {\n        this.postParams.refreshmethod = function () { window.location = '../HtmlPages/MarriageSearch.html' + window.location.hash; };\n        this.postParams.url = '/Marriages/Add';\n        this.postParams.data = this.GetMarriageRecord();\n        this.ancUtils.twaPostJSON(this.postParams);\n    }\n\n};\n\n\n\n\n\n\n\n\n\n"],[0,"\n\n//"]],"start1":0,"start2":0,"length1":5,"length2":3774}]],"length":6637,"saved":false}
{"ts":1354636186460,"patch":[[{"diffs":[[0,"\n    Get"],[-1,"Marriag"],[1,"SourceTyp"],[0,"eRecord:"]],"start1":1256,"start2":1256,"length1":23,"length2":25},{"diffs":[[0,"on ("],[-1,"rowIdx) {\n        // theData.SourceDescription = $('#txtSource').val();\n        var record = {};\n        record.FemaleLocationId = '';\n        record.LocationId = ''"],[1,") {\n\n        var data = {}"],[0,";\n    "],[-1,"    record.MaleLocationId = '';\n        record.SourceDescription = $('#txtSource').val();\n        record.Sources = this.qryStrUtils.getParameterByName('source_ids', '');\n        record.MarriageId = this.qryStrUtils.getParameterByName('id', '');\n        record.IsBanns = $('#chkIsBann').prop('checked');\n        record.IsLicense = $('#chkIsLic').prop('checked');\n        record.IsWidow = $('#chkIsWid').prop('checked');\n        record.IsWidower = $('#chkIsWiw').prop('checked');\n        record.FemaleBirthYear = $('#txtFBYr').val();\n        record.FemaleCName = $('#txtFemaleName').val();\n        record.FemaleLocation = $('#txtFemaleLoc').val();\n        record.FemaleNotes = $('#txtFNot').val();\n        record.FemaleOccupation = $('#txtFOcc').val();\n        record.FemaleSName = $('#txtFemaleSurname').val();\n        record.LocationCounty = $('#txtCounty').val();\n        record.MaleBirthYear = $('#txtMBYr').val();\n        record.MaleCName = $('#txtMaleName').val();\n        record.MaleLocation = $('#txtMaleLoc').val();\n        record.MaleNotes = $('#txtMNot').val();\n        record.MaleOccupation = $('#txtMOcc').val();\n        record.MaleSName = $('#txtMaleSurname').val();\n        record.MarriageDate = $('#txtMDate').val();\n        record.MarriageLocation = $('#txtParish"],[1,"\n        data.TypeId = this.qryStrUtils.getParameterByName('id', '');\n        data.Description = $('#txtDescription"],[0,"').v"]],"start1":1288,"start2":1288,"length1":1457,"length2":155},{"diffs":[[0,"();\n"],[-1,"\n"],[0,"        "],[-1,"record.Witness1ChristianName = $('#txtWit1c').val();\n        record.Witness1Surname = $('#txtWit1').val();\n        record.Witness2ChristianName = $('#txtWit2c').val();\n        record.Witness2Surname = $('#txtWit2').val();\n        record.Witness3ChristianName = $('#txtWit3c').val();\n        record.Witness3Surname = $('#txtWit3').val();\n        record.Witness4ChristianName = $('#txtWit4c').val();\n        record.Witness4Surname = $('#txtWit4').val();\n\n        return record;"],[1,"data.Order = $('#txtOrder').val();\n        \n        return data;\n    "],[0,"\n   "]],"start1":1445,"start2":1445,"length1":492,"length2":85},{"diffs":[[0,"tParams.url = '/"],[-1,"Marriag"],[1,"SourceTyp"],[0,"es/Add';\n       "]],"start1":1574,"start2":1574,"length1":39,"length2":41},{"diffs":[[0,".data = this.Get"],[-1,"Marriag"],[1,"SourceTyp"],[0,"eRecord();\n     "]],"start1":1631,"start2":1631,"length1":39,"length2":41},{"diffs":[[0,"mlPages/"],[-1,"Marriage"],[1,"SourceTypes"],[0,"Search.h"]],"start1":1835,"start2":1835,"length1":24,"length2":27},{"diffs":[[0,"url = '/"],[-1,"Marriag"],[1,"SourceTyp"],[0,"es/Add';"]],"start1":1918,"start2":1918,"length1":23,"length2":25},{"diffs":[[0,".Get"],[-1,"Marriag"],[1,"SourceTyp"],[0,"eRec"]],"start1":1979,"start2":1979,"length1":15,"length2":17},{"diffs":[[0,");\n\n"],[-1,"    //    var localurl = getHost() + '/SourceTypes/Add';\n    //    var stringy = JSON.stringify(GetSourceTypeRecord());\n\n    //    $.ajax({\n    //        cache: false,\n    //        type: \"POST\",\n    //        async: false,\n    //        url: localurl,\n    //        data: stringy,\n    //        contentType: \"application/json\",\n    //        dataType: \"json\",\n    //        success: function (message) {\n\n    //            var result = getValueFromKey(message, 'Id');\n\n    //            updateQryPar('id', result);\n\n    //            var error = getValueFromKey(message, 'error');\n\n    //            if (error != '' && error != null) {\n    //                showError(error);\n    //            }\n    //            else {\n    //                var _hash = window.location.hash;\n    //                window.location = '../HtmlPages/SourceTypesSearch.html' + _hash;\n    //            }\n    //        }\n    //    });\n}\n\n\n\nsaveSourceType = function () {\n\n    twaPostJSON('/SourceTypes/Add', GetSourceTypeRecord(), '', 'id');\n\n//    var localurl = getHost() + '/SourceTypes/Add';\n\n\n\n//    var stringy = JSON.stringify(GetSourceTypeRecord());\n\n//    $.ajax({\n//        cache: false,\n//        type: \"POST\",\n//        async: false,\n//        url: localurl,\n//        data: stringy,\n//        contentType: \"application/json\",\n//        dataType: \"json\",\n//        success: function (message) {\n\n//            var result = getValueFromKey(message, 'Id');\n\n//            updateQryPar('id', result);\n\n//            var error = getValueFromKey(message, 'error');\n\n//            if (error != '' && error != null) {\n//                showError(error);\n//            }\n\n\n//        }\n\n//    });\n\n}\n\n//ok\nfunction getSourceType() {\n\n    var params = {};\n\n //   var url = getHost() + \"/SourceTypes/Id\";\n\n    var id = getParameterByName('id', '');\n\n    params[0] = id;\n\n//    $.ajaxSetup({ cache: false });\n//    $.getJSON(url, params, processData);\n\n    twaGetJSON(\"/SourceTypes/Id\", params, processData);\n\n    return false;\n}\n\n\n\nfunction processData(data) {\n\n    // public string AddPerson(string personId, string birthparishId,string deathparishId, string referenceparishId, string ismale, string years, string months, string weeks, string days)\n\n    $('#txtOrder').val(data.Order);\n    $('#txtDescription').val(data.Description);\n  \n}\n\n\n\nGetSourceTypeRecord = function (rowIdx) {\n    var data = {};\n\n    data.TypeId = getParameterByName('id', '');\n    data.Description = $('#txtDescription').val();\n    data.Order = $('#txtOrder').val();\n\n\n\n    return data;\n}"],[1,"\n}\n\n\n\nsaveSourceType = function () {\n\n    twaPostJSON('/SourceTypes/Add', GetSourceTypeRecord(), '', 'id');\n\n}\n\n//ok\nfunction getSourceType() {\n\n    var params = {};\n\n //   var url = getHost() + \"/SourceTypes/Id\";\n\n    var id = getParameterByName('id', '');\n\n    params[0] = id;\n\n//    $.ajaxSetup({ cache: false });\n//    $.getJSON(url, params, processData);\n\n    twaGetJSON(\"/SourceTypes/Id\", params, processData);\n\n    return false;\n}\n\n\n"]],"start1":2392,"start2":2392,"length1":2549,"length2":444}]],"length":2836,"saved":false}
{"ts":1354636476812,"patch":[[{"diffs":[[0,"\n};\n"],[-1,"\n\n\n\n\n\n\n\n\n\n\n//ok\n\n$(document).ready(function () {\n\n\n\n    createHeader('#1',getSourceType);\n  \n});\n\n//ok\nsave = function () {\n   // var sourceType = getSourceType();\n\n    saveSourceType();\n\n}\n\n\n//ok\nsaveReturn = function () {\n\n    twaPostJSON('/SourceTypes/Add', GetSourceTypeRecord(), '../HtmlPages/SourceTypesSearch.html', 'id');\n\n\n}\n\n\n\nsaveSourceType = function () {\n\n    twaPostJSON('/SourceTypes/Add', GetSourceTypeRecord(), '', 'id');\n\n}\n\n//ok\nfunction getSourceType() {\n\n    var params = {};\n\n //   var url = getHost() + \"/SourceTypes/Id\";\n\n    var id = getParameterByName('id', '');\n\n    params[0] = id;\n\n//    $.ajaxSetup({ cache: false });\n//    $.getJSON(url, params, processData);\n\n    twaGetJSON(\"/SourceTypes/Id\", params, processData);\n\n    return false;\n}\n\n\n"]],"start1":2061,"start2":2061,"length1":775,"length2":4}]],"length":2065,"saved":false}
